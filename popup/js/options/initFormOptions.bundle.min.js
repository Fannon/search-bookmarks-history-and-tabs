var optionsPopup=(()=>{var Ur=Object.defineProperty;var t=(r,n)=>Ur(r,"name",{value:n,configurable:!0});var Le=(r,n)=>()=>(r&&(n=r(r=0)),n);var It=(r,n)=>{for(var e in n)Ur(r,e,{get:n[e],enumerable:!0})};function ct(r,n){let e="";n&&(e+=`<li class="error"><b>Error</b>: ${n}</span>`,console.error(n)),console.error(r),e+=`<li class="error"><b>Error Message</b>: ${r.message}</span>`,r.stack&&(e+=`<li class="error"><b>Error Stack</b>: ${r.stack}</li>`);let s=document.getElementById("error-list");s.innerHTML=e+s.innerHTML,s.style="display: block;"}var Nt=Le(()=>{t(ct,"printError")});function fe(r){if(Array.isArray(r))return r.map(n=>fe(n));if(r&&typeof r=="object"){let n={};for(let[e,s]of Object.entries(r))n[e]=fe(s);return n}return r}function qe(r,n){if(r===n)return!0;if(Array.isArray(r)&&Array.isArray(n)){if(r.length!==n.length)return!1;for(let e=0;e<r.length;e+=1)if(!qe(r[e],n[e]))return!1;return!0}if(ze(r)&&ze(n)){let e=Object.keys(r),s=Object.keys(n);if(e.length!==s.length)return!1;for(let d of e)if(!qe(r[d],n[d]))return!1;return!0}return!1}function ze(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}var gt=Le(()=>{t(fe,"deepClone");t(qe,"deepEqual");t(ze,"isPlainObject")});function Tr(r,n){let e=Br(r,n);return e===void 0?{}:e}function Br(r,n){if(!qe(r,n)){if(Array.isArray(r)){if(!Array.isArray(n))return fe(r);if(r.length!==n.length)return fe(r);for(let e=0;e<r.length;e+=1)if(!qe(r[e],n[e]))return fe(r);return}if(ze(r)){if(!ze(n))return fe(r);let e=new Set([...Object.keys(r),...Object.keys(n)]),s={};for(let d of e){if(!Object.prototype.hasOwnProperty.call(r,d))continue;let i=Br(r[d],n[d]);i!==void 0&&(s[d]=i)}return Object.keys(s).length===0?void 0:s}return fe(r)}}var Qt=Le(()=>{gt();t(Tr,"computeOverrides");t(Br,"diffRecursive")});async function Wr(r={}){return new Promise((n,e)=>{try{Yn(r)}catch(s){return ct(s,"Could not save user options."),e(s)}if(ext.browserApi.storage&&ext.browserApi.storage.sync)ext.browserApi.storage.sync.set({userOptions:r},()=>ext.browserApi.runtime.lastError?e(ext.browserApi.runtime.lastError):n());else return console.warn("No storage API found. Falling back to local Web Storage"),window.localStorage.setItem("userOptions",JSON.stringify(r)),n()})}async function Hr(){return new Promise((r,n)=>{try{if(ext.browserApi.storage&&ext.browserApi.storage.sync)ext.browserApi.storage.sync.get(["userOptions"],e=>{if(ext.browserApi.runtime.lastError)return n(ext.browserApi.runtime.lastError);let s=e.userOptions||qr;return r(s)});else{console.warn("No storage API found. Falling back to local Web Storage");let e=window.localStorage.getItem("userOptions"),s=e?JSON.parse(e):qr;return r(s)}}catch(e){return n(e)}})}function Yn(r){if(r){if(typeof r!="object")throw new Error("User options must be a valid YAML / JSON object");try{JSON.stringify(r)}catch(n){throw new Error("User options cannot be parsed into JSON: "+n.message)}}}var M,qr,Lt=Le(()=>{Nt();Qt();M={debug:!1,searchStrategy:"precise",searchMaxResults:32,searchMinMatchCharLength:1,searchFuzzyness:.6,searchDebounceMs:100,colorStripeWidth:5,bookmarkColor:"#3c8d8d",tabColor:"#b89aff",historyColor:"#9ece2f",searchColor:"#e1a535",customSearchColor:"#ce5c2f",directColor:"#7799CE",enableTabs:!0,enableBookmarks:!0,enableHistory:!0,enableSearchEngines:!0,enableHelp:!0,enableDirectUrl:!0,displayTags:!0,displayFolderName:!0,displaySearchMatchHighlight:!0,displayLastVisit:!0,displayVisitCounter:!1,displayDateAdded:!1,displayScore:!0,bookmarksIgnoreFolderList:[],tabsOnlyCurrentWindow:!1,maxRecentTabsToShow:16,historyDaysAgo:14,historyMaxItems:1024,historyIgnoreList:["extension://"],searchEngineChoices:[{name:"Google",urlPrefix:"https://www.google.com/search?q=$s"},{name:"Bing",urlPrefix:"https://www.bing.com/search?q=$s"},{name:"dict.cc",urlPrefix:"https://www.dict.cc/?s=$s"}],customSearchEngines:[{alias:["g","google"],name:"Google",urlPrefix:"https://www.google.com/search?q=$s",blank:"https://www.google.com"},{alias:["d","dict"],name:"dict.cc",urlPrefix:"https://www.dict.cc/?s=$s",blank:"https://www.dict.cc"}],scoreMinScore:30,scoreMinSearchTermMatchRatio:.6,scoreBookmarkBaseScore:100,scoreTabBaseScore:70,scoreHistoryBaseScore:45,scoreSearchEngineBaseScore:30,scoreCustomSearchEngineBaseScore:400,scoreDirectUrlScore:500,scoreTitleWeight:1,scoreTagWeight:.7,scoreUrlWeight:.6,scoreFolderWeight:.5,scoreCustomBonusScore:!0,scoreExactIncludesBonus:5,scoreExactIncludesBonusMinChars:3,scoreExactStartsWithBonus:10,scoreExactEqualsBonus:15,scoreExactTagMatchBonus:10,scoreExactFolderMatchBonus:5,scoreVisitedBonusScore:.5,scoreVisitedBonusScoreMaximum:20,scoreRecentBonusScoreMaximum:20,titleLengthRestrictionForUrls:80,uFuzzyOptions:{}},qr={searchStrategy:M.searchStrategy};t(Wr,"setUserOptions");t(Hr,"getUserOptions");t(Yn,"validateUserOptions")});var Jr={};It(Jr,{optionsSchema:()=>Gn,uiSchema:()=>Qn});var Gn,Qn,Vr=Le(()=>{Lt();Gn={$id:"https://github.com/Fannon/search-bookmarks-history-and-tabs/options-schema.json",$schema:"http://json-schema.org/draft-07/schema#",type:"object",additionalProperties:!1,properties:{debug:{type:"boolean",default:M.debug,description:"Log additional diagnostic information to help troubleshooting.","ui:section":"general"},searchStrategy:{type:"string",enum:["precise","fuzzy"],default:M.searchStrategy,description:"Search approach to use for matching.","ui:section":"search"},searchMaxResults:{type:"integer",minimum:1,default:M.searchMaxResults,description:"Maximum number of search results to display.","ui:section":"search"},searchMinMatchCharLength:{type:"integer",minimum:1,default:M.searchMinMatchCharLength,description:"Minimum length of the search term considered for a match.","ui:section":"search"},searchFuzzyness:{type:"number",minimum:0,maximum:1,default:M.searchFuzzyness,description:"Fuzzy search threshold between 0 (precise) and 1 (full fuzziness).","ui:section":"search"},searchDebounceMs:{type:"integer",minimum:0,default:M.searchDebounceMs,description:"Debounce duration for the search field in milliseconds.","ui:section":"search"},colorStripeWidth:{type:"integer",minimum:0,maximum:16,default:M.colorStripeWidth,description:"Width of the accent stripe next to search results in pixels.","ui:section":"style"},bookmarkColor:{type:"string",pattern:"^#([0-9a-fA-F]{3}){1,2}$",default:M.bookmarkColor,description:"Color used for bookmark results.","ui:section":"style"},tabColor:{type:"string",pattern:"^#([0-9a-fA-F]{3}){1,2}$",default:M.tabColor,description:"Color used for tab results.","ui:section":"style"},historyColor:{type:"string",pattern:"^#([0-9a-fA-F]{3}){1,2}$",default:M.historyColor,description:"Color used for history results.","ui:section":"style"},searchColor:{type:"string",pattern:"^#([0-9a-fA-F]{3}){1,2}$",default:M.searchColor,description:"Color used for built-in search engines.","ui:section":"style"},customSearchColor:{type:"string",pattern:"^#([0-9a-fA-F]{3}){1,2}$",default:M.customSearchColor,description:"Color used for custom search engines.","ui:section":"style"},directColor:{type:"string",pattern:"^#([0-9a-fA-F]{3}){1,2}$",default:M.directColor,description:"Color used for direct URL matches.","ui:section":"style"},enableTabs:{type:"boolean",default:M.enableTabs,description:"Index and search open tabs.","ui:section":"sources"},enableBookmarks:{type:"boolean",default:M.enableBookmarks,description:"Index and search bookmarks.","ui:section":"sources"},enableHistory:{type:"boolean",default:M.enableHistory,description:"Index and search browser history.","ui:section":"sources"},enableSearchEngines:{type:"boolean",default:M.enableSearchEngines,description:"Show search engine links for fallback searches.","ui:section":"sources"},enableHelp:{type:"boolean",default:M.enableHelp,description:"Display tips when the popup loads.","ui:section":"sources"},enableDirectUrl:{type:"boolean",default:M.enableDirectUrl,description:"Recognize typed URLs and allow direct navigation.","ui:section":"sources"},displayTags:{type:"boolean",default:M.displayTags,description:"Show and search bookmark tags.","ui:section":"display"},displayFolderName:{type:"boolean",default:M.displayFolderName,description:"Show bookmark folder names in results.","ui:section":"display"},displaySearchMatchHighlight:{type:"boolean",default:M.displaySearchMatchHighlight,description:"Highlight matches within results.","ui:section":"display"},displayLastVisit:{type:"boolean",default:M.displayLastVisit,description:"Display relative time since the last visit.","ui:section":"display"},displayVisitCounter:{type:"boolean",default:M.displayVisitCounter,description:"Display how often an item was visited.","ui:section":"display"},displayDateAdded:{type:"boolean",default:M.displayDateAdded,description:"Display the creation date for bookmarks.","ui:section":"display"},displayScore:{type:"boolean",default:M.displayScore,description:"Display the calculated score next to each result.","ui:section":"display"},bookmarksIgnoreFolderList:{type:"array",items:{type:"string",minLength:1},default:M.bookmarksIgnoreFolderList,description:"Folders whose bookmarks should be excluded from search.","ui:section":"bookmarks"},tabsOnlyCurrentWindow:{type:"boolean",default:M.tabsOnlyCurrentWindow,description:"Limit tab indexing to the current browser window.","ui:section":"tabs"},maxRecentTabsToShow:{type:"integer",minimum:0,default:M.maxRecentTabsToShow,description:"Number of recent tabs shown when opening the popup without a query.","ui:section":"tabs","x-allowZeroOrMin":3},historyDaysAgo:{type:"integer",minimum:1,default:M.historyDaysAgo,description:"How many days of history to include.","ui:section":"history"},historyMaxItems:{type:"integer",minimum:0,default:M.historyMaxItems,description:"Maximum number of history entries to index.","ui:section":"history"},historyIgnoreList:{type:"array",items:{type:"string",minLength:1},default:M.historyIgnoreList,description:"URLs containing these fragments will be skipped from history results.","ui:section":"history"},searchEngineChoices:{type:"array",minItems:1,items:{$ref:"#/definitions/searchEngine"},default:M.searchEngineChoices,description:"Built-in search engines offered as fallback entries.","ui:section":"searchEngines"},customSearchEngines:{type:"array",items:{$ref:"#/definitions/customSearchEngine"},default:M.customSearchEngines,description:"Custom search engines with optional aliases and blank URLs.","ui:section":"searchEngines"},scoreMinScore:{type:"integer",minimum:0,default:M.scoreMinScore,description:"Filter out results scoring below this threshold.","ui:section":"scores"},scoreMinSearchTermMatchRatio:{type:"number",minimum:0,maximum:1,default:M.scoreMinSearchTermMatchRatio,description:"Required match ratio for precise search.","ui:section":"scores"},scoreBookmarkBaseScore:{type:"integer",default:M.scoreBookmarkBaseScore,description:"Base score applied to bookmark results.","ui:section":"scores"},scoreTabBaseScore:{type:"integer",default:M.scoreTabBaseScore,description:"Base score applied to open tab results.","ui:section":"scores"},scoreHistoryBaseScore:{type:"integer",default:M.scoreHistoryBaseScore,description:"Base score applied to history results.","ui:section":"scores"},scoreSearchEngineBaseScore:{type:"integer",default:M.scoreSearchEngineBaseScore,description:"Base score applied to default search engines.","ui:section":"scores"},scoreCustomSearchEngineBaseScore:{type:"integer",default:M.scoreCustomSearchEngineBaseScore,description:"Base score applied to custom search engines.","ui:section":"scores"},scoreDirectUrlScore:{type:"integer",default:M.scoreDirectUrlScore,description:"Base score applied when typing a direct URL.","ui:section":"scores"},scoreTitleWeight:{type:"number",default:M.scoreTitleWeight,description:"Weight multiplier for matches in titles.","ui:section":"scores"},scoreTagWeight:{type:"number",default:M.scoreTagWeight,description:"Weight multiplier for matches in tags.","ui:section":"scores"},scoreUrlWeight:{type:"number",default:M.scoreUrlWeight,description:"Weight multiplier for matches in URLs.","ui:section":"scores"},scoreFolderWeight:{type:"number",default:M.scoreFolderWeight,description:"Weight multiplier for matches in folder names.","ui:section":"scores"},scoreCustomBonusScore:{type:"boolean",default:M.scoreCustomBonusScore,description:"Allow bookmark titles to embed manual bonus scores.","ui:section":"scores"},scoreExactIncludesBonus:{type:"integer",default:M.scoreExactIncludesBonus,description:"Bonus score for exact include matches.","ui:section":"scores"},scoreExactIncludesBonusMinChars:{type:"integer",minimum:1,default:M.scoreExactIncludesBonusMinChars,description:"Minimum characters needed for exact include bonus.","ui:section":"scores"},scoreExactStartsWithBonus:{type:"integer",default:M.scoreExactStartsWithBonus,description:"Bonus score when title or URL starts with the search term.","ui:section":"scores"},scoreExactEqualsBonus:{type:"integer",default:M.scoreExactEqualsBonus,description:"Bonus score when title matches exactly.","ui:section":"scores"},scoreExactTagMatchBonus:{type:"integer",default:M.scoreExactTagMatchBonus,description:"Bonus score for exact tag matches.","ui:section":"scores"},scoreExactFolderMatchBonus:{type:"integer",default:M.scoreExactFolderMatchBonus,description:"Bonus score for exact folder matches.","ui:section":"scores"},scoreVisitedBonusScore:{type:"number",minimum:0,default:M.scoreVisitedBonusScore,description:"Bonus score per visit from browsing history.","ui:section":"scores"},scoreVisitedBonusScoreMaximum:{type:"integer",minimum:0,default:M.scoreVisitedBonusScoreMaximum,description:"Upper bound for visit-based bonus score.","ui:section":"scores"},scoreRecentBonusScoreMaximum:{type:"integer",minimum:0,default:M.scoreRecentBonusScoreMaximum,description:"Maximum bonus for recently visited items.","ui:section":"scores"},titleLengthRestrictionForUrls:{type:"integer",minimum:0,default:M.titleLengthRestrictionForUrls,description:"Maximum URL length before shortening titles.","ui:section":"powerUsers"},uFuzzyOptions:{type:"object",default:M.uFuzzyOptions,description:"Advanced configuration for the uFuzzy search library.",additionalProperties:!0,"ui:section":"powerUsers"}},definitions:{searchEngine:{type:"object",required:["name","urlPrefix"],additionalProperties:!1,properties:{name:{type:"string",minLength:1},urlPrefix:{type:"string",minLength:1}}},customSearchEngine:{type:"object",required:["alias","name","urlPrefix"],additionalProperties:!1,properties:{alias:{oneOf:[{type:"array",minItems:1,items:{type:"string",minLength:1}},{type:"string",minLength:1}]},name:{type:"string",minLength:1},urlPrefix:{type:"string",minLength:1},blank:{type:"string",minLength:1}}}}},Qn={sectionOrder:["general","search","style","sources","display","bookmarks","tabs","history","searchEngines","scores","powerUsers"],sections:{general:{title:"General",description:"Configure extension wide behaviour."},search:{title:"Search",description:"Tune core search behaviour and responsiveness."},style:{title:"Style",description:"Customize colors and visual accents."},sources:{title:"Sources",description:"Enable or disable data sources."},display:{title:"Display",description:"Control which metadata is rendered for each result."},bookmarks:{title:"Bookmarks",description:"Fine tune bookmark indexing."},tabs:{title:"Tabs",description:"Control how open tabs are handled."},history:{title:"History",description:"Adjust browser history indexing."},searchEngines:{title:"Search Engines",description:"Curate built-in and custom search engine shortcuts."},scores:{title:"Scores",description:"Modify scoring heuristics."},powerUsers:{title:"Power Users",description:"Advanced options for experienced users.",collapsedByDefault:!0}},fields:{debug:{control:"switch"},searchStrategy:{control:"segmented",options:[{value:"precise",label:"Precise"},{value:"fuzzy",label:"Fuzzy"}]},searchMaxResults:{control:"number",unit:"results",step:1},searchMinMatchCharLength:{control:"number",step:1},searchFuzzyness:{control:"slider",step:.05},searchDebounceMs:{control:"number",unit:"ms",step:10},colorStripeWidth:{control:"number",unit:"px",step:1},bookmarkColor:{control:"color"},tabColor:{control:"color"},historyColor:{control:"color"},searchColor:{control:"color"},customSearchColor:{control:"color"},directColor:{control:"color"},enableTabs:{control:"switch"},enableBookmarks:{control:"switch"},enableHistory:{control:"switch"},enableSearchEngines:{control:"switch"},enableHelp:{control:"switch"},enableDirectUrl:{control:"switch"},displayTags:{control:"switch"},displayFolderName:{control:"switch"},displaySearchMatchHighlight:{control:"switch"},displayLastVisit:{control:"switch"},displayVisitCounter:{control:"switch"},displayDateAdded:{control:"switch"},displayScore:{control:"switch"},bookmarksIgnoreFolderList:{control:"stringList",placeholder:"Folder name"},tabsOnlyCurrentWindow:{control:"switch"},maxRecentTabsToShow:{control:"number",step:1},historyDaysAgo:{control:"number",step:1,unit:"days"},historyMaxItems:{control:"number",step:32},historyIgnoreList:{control:"stringList",placeholder:"URL fragment"},searchEngineChoices:{control:"objectList",itemName:"Search Engine"},customSearchEngines:{control:"objectList",itemName:"Custom Search Engine"},scoreMinScore:{control:"number",step:1},scoreMinSearchTermMatchRatio:{control:"slider",step:.05},scoreBookmarkBaseScore:{control:"number",step:1},scoreTabBaseScore:{control:"number",step:1},scoreHistoryBaseScore:{control:"number",step:1},scoreSearchEngineBaseScore:{control:"number",step:1},scoreCustomSearchEngineBaseScore:{control:"number",step:1},scoreDirectUrlScore:{control:"number",step:1},scoreTitleWeight:{control:"number",step:.1},scoreTagWeight:{control:"number",step:.1},scoreUrlWeight:{control:"number",step:.1},scoreFolderWeight:{control:"number",step:.1},scoreCustomBonusScore:{control:"switch"},scoreExactIncludesBonus:{control:"number",step:1},scoreExactIncludesBonusMinChars:{control:"number",step:1},scoreExactStartsWithBonus:{control:"number",step:1},scoreExactEqualsBonus:{control:"number",step:1},scoreExactTagMatchBonus:{control:"number",step:1},scoreExactFolderMatchBonus:{control:"number",step:1},scoreVisitedBonusScore:{control:"number",step:.1},scoreVisitedBonusScoreMaximum:{control:"number",step:1},scoreRecentBonusScoreMaximum:{control:"number",step:1},titleLengthRestrictionForUrls:{control:"number",step:5},uFuzzyOptions:{control:"json",advanced:!0},"searchEngineChoices[].name":{label:"Name"},"searchEngineChoices[].urlPrefix":{label:"URL Prefix"},"customSearchEngines[].alias":{control:"stringList",label:"Aliases"},"customSearchEngines[].name":{label:"Name"},"customSearchEngines[].urlPrefix":{label:"URL Prefix"},"customSearchEngines[].blank":{label:"Blank (optional)"}}}});var Yr={};It(Yr,{appendItem:()=>no,collectCustomizedPaths:()=>er,createFormState:()=>Xn,customizedCount:()=>ao,deleteAtPath:()=>Zr,getAtPath:()=>Ce,getOverrides:()=>so,isCustomized:()=>io,removeItem:()=>oo,resetAll:()=>ro,resetField:()=>to,setAtPath:()=>bt,updateField:()=>eo});async function Xn(r){let n=await Hr(),e=fe(r),s=fe(n||{}),d=co(e,s);return{defaults:e,formData:d,customizedPaths:er(e,d)}}function eo(r,n,e){bt(r.formData,n,e),zt(r,n)}function to(r,n){let e=Ce(r.defaults,n);typeof e>"u"?Zr(r.formData,n):bt(r.formData,n,fe(e)),zt(r,n)}function ro(r){r.formData=fe(r.defaults),r.customizedPaths=er(r.defaults,r.formData)}function no(r,n,e){let s=Ce(r.formData,n)||[],d=Array.isArray(s)?[...s,e]:[e];bt(r.formData,n,d),zt(r,n)}function oo(r,n,e){let s=Ce(r.formData,n);if(!Array.isArray(s))return;let d=s.slice();d.splice(e,1),bt(r.formData,n,d),zt(r,n)}function so(r){return Tr(r.formData,r.defaults)}function io(r,n){return r.customizedPaths.has(n.join("."))}function ao(r){return r.customizedPaths.size}function er(r,n,e=[]){let s=new Set;return Xt(r,n,e,s),s}function Xt(r,n,e,s){if(!qe(r,n)){let d=e.join(".");d.length&&s.add(d)}if(Array.isArray(n)||Array.isArray(r)){let d=Math.max(Array.isArray(r)?r.length:0,Array.isArray(n)?n.length:0);for(let i=0;i<d;i+=1){let f=[...e,String(i)],y=Array.isArray(r)?r[i]:void 0,b=Array.isArray(n)?n[i]:void 0;Xt(y,b,f,s)}return}if(n&&typeof n=="object"&&!Array.isArray(n)){let d=new Set([...Object.keys(r||{}),...Object.keys(n||{})]);for(let i of d){let f=[...e,i];Xt(r?r[i]:void 0,n?n[i]:void 0,f,s)}}}function zt(r,n){for(let e=n.length;e>=1;e-=1){let s=n.slice(0,e),d=s.join("."),i=Ce(r.defaults,s),f=Ce(r.formData,s);qe(i,f)?r.customizedPaths.delete(d):r.customizedPaths.add(d)}}function co(r,n){let e=fe(r);if(n&&typeof n=="object")for(let[s,d]of Object.entries(n))e[s]=fe(d);return e}function Ce(r,n){return n.reduce((e,s)=>{if(e!=null)return e[s]},r)}function bt(r,n,e){if(!n.length)throw new Error("Path must contain at least one segment");let s=r;for(let i=0;i<n.length-1;i+=1){let f=n[i],y=n[i+1],b=Kr(y),S=s[f];S==null?(S=b?[]:{},s[f]=S):b&&!Array.isArray(S)?(S=Array.isArray(S)?S:[S],s[f]=S):!b&&(typeof S!="object"||Array.isArray(S))&&(S={},s[f]=S),s=S}let d=n[n.length-1];Array.isArray(s)&&Kr(d)?s[Number(d)]=e:s[d]=e}function Zr(r,n){if(!n.length)return;let e=r;for(let d=0;d<n.length-1;d+=1){let i=n[d];if(e[i]===void 0||e[i]===null)return;e=e[i]}let s=n[n.length-1];Array.isArray(e)?e.splice(Number(s),1):delete e[s]}function Kr(r){return typeof r=="number"?Number.isInteger(r)&&r>=0:typeof r=="string"?/^[0-9]+$/.test(r):!1}var tr=Le(()=>{Lt();Qt();gt();t(Xn,"createFormState");t(eo,"updateField");t(to,"resetField");t(ro,"resetAll");t(no,"appendItem");t(oo,"removeItem");t(so,"getOverrides");t(io,"isCustomized");t(ao,"customizedCount");t(er,"collectCustomizedPaths");t(Xt,"walkCustomization");t(zt,"refreshCustomization");t(co,"mergeOptions");t(Ce,"getAtPath");t(bt,"setAtPath");t(Zr,"deleteAtPath");t(Kr,"isArrayIndex")});var tn={};It(tn,{renderOptionsForm:()=>lo});function lo({container:r,schema:n,uiSchema:e,state:s,errors:d=new Map,customizedCount:i,sectionState:f,isCustomized:y,handlers:b}){let S=d instanceof Map?d:new Map(d);r.innerHTML="";let R=document.createElement("div");R.className="options-app";let _=uo(i,b);R.appendChild(_);let N=fo(S,b);N&&R.appendChild(N);let v=document.createElement("div");v.className="options-sections";let o=Co(n);for(let p of e.sectionOrder){let u=o.get(p);if(!u||u.length===0)continue;let m=e.sections[p]||{title:p},g=po({sectionId:p,sectionMeta:m,fields:u,schema:n,uiSchema:e,state:s,errors:S,sectionState:f,isCustomized:y,handlers:b});v.appendChild(g)}R.appendChild(v),r.appendChild(R)}function uo(r,n){let e=document.createElement("header");e.className="options-header";let s=document.createElement("div");s.className="options-header__summary";let d=document.createElement("h1");d.textContent="Extension Options",s.appendChild(d);let i=document.createElement("div");i.className="options-header__customized",i.textContent=r===1?"1 customized field":`${r} customized fields`,s.appendChild(i);let f=document.createElement("div");f.className="options-header__actions";let y=document.createElement("button");y.type="button",y.className="options-button options-button--secondary",y.textContent="Reset all to defaults",y.addEventListener("click",()=>n.onResetAll()),f.appendChild(y);let b=document.createElement("button");b.type="button",b.className="options-button options-button--ghost",b.textContent="Download overrides (YAML)",b.addEventListener("click",()=>n.onDownload()),f.appendChild(b);let S=document.createElement("button");return S.type="button",S.className="options-button options-button--primary",S.textContent="Save changes",S.addEventListener("click",()=>n.onSubmit()),f.appendChild(S),e.appendChild(s),e.appendChild(f),e}function fo(r,n){if(!r||r.size===0)return null;let e=document.createElement("div");e.className="options-error-banner";let s=document.createElement("strong");s.textContent="Please review the highlighted fields.",e.appendChild(s);let d=document.createElement("ul");d.className="options-error-banner__list";let i=0;for(let[f,y]of r.entries()){if(i>=3||y.length===0)continue;let b=document.createElement("li"),S=document.createElement("button");S.type="button",S.className="options-link-button",S.textContent=y[0],S.addEventListener("click",()=>n.onFocus(f)),b.appendChild(S),d.appendChild(b),i+=1}if(i>0&&e.appendChild(d),r.size>i){let f=document.createElement("p");f.className="options-error-banner__more",f.textContent=`+${r.size-i} more issue(s)`,e.appendChild(f)}return e}function po({sectionId:r,sectionMeta:n,fields:e,schema:s,uiSchema:d,state:i,errors:f,sectionState:y,isCustomized:b,handlers:S}){let R=document.createElement("section");R.className="options-section",R.dataset.section=r;let _=document.createElement("header");_.className="options-section__header";let N=document.createElement("button");if(N.type="button",N.className="options-section__toggle",N.textContent=n.title,N.addEventListener("click",()=>{let p=y[r]??!!n.collapsedByDefault;S.onToggleSection(r,!p)}),_.appendChild(N),n.description){let p=document.createElement("p");p.className="options-section__description",p.textContent=n.description,_.appendChild(p)}R.appendChild(_);let v=y[r]??!!n.collapsedByDefault,o=document.createElement("div");o.className="options-section__body",v&&(R.classList.add("options-section--collapsed"),o.hidden=!0);for(let p of e){let u=s.properties[p],m=[p],g=Ce(i.formData,m),j=en(d,p,m),O=Xr({fieldName:p,schema:s,fieldSchema:u,uiField:j,path:m,value:g,errors:f,isCustomized:b,handlers:S,uiSchema:d,state:i,variant:"root"});o.appendChild(O)}return R.appendChild(o),R}function Xr({fieldName:r,schema:n,fieldSchema:e,uiField:s,path:d,value:i,errors:f,isCustomized:y,handlers:b,uiSchema:S,state:R,variant:_}){let N=rr(e,i,n),v=Ao(f,d),o=document.createElement("div");o.className="options-field",_==="nested"&&o.classList.add("options-field--nested"),o.dataset.path=d.join("."),y(d)&&o.classList.add("options-field--customized"),v.length>0&&o.classList.add("options-field--error");let p=document.createElement("div");p.className="options-field__header";let u=document.createElement("label");u.className="options-field__label",u.textContent=s.label||nr(r),p.appendChild(u);let m=document.createElement("button");m.type="button",m.className="options-link-button",m.textContent="Reset",m.addEventListener("click",()=>b.onResetField(d)),p.appendChild(m);let g=document.createElement("div");g.className="options-field__control";let j=mo({schema:n,fieldSchema:N,uiField:s,path:d,value:i,handlers:b,uiSchema:S,state:R,errors:f,isCustomized:y});if(g.appendChild(j),o.appendChild(p),o.appendChild(g),N.description){let O=document.createElement("p");O.className="options-field__description",O.textContent=N.description,o.appendChild(O)}if(v.length>0){let O=document.createElement("ul");O.className="options-field__errors";for(let B of v){let W=document.createElement("li");W.textContent=B,O.appendChild(W)}o.appendChild(O)}return o}function mo({schema:r,fieldSchema:n,uiField:e,path:s,value:d,handlers:i,uiSchema:f,state:y,errors:b,isCustomized:S}){switch($o(n,e)){case"switch":return ho(s,d,i);case"segmented":return yo(s,n,e,d,i);case"number":return go(s,n,e,d,i);case"slider":return bo(s,n,e,d,i);case"color":return wo(s,d,i);case"select":return vo(s,n,d,i);case"stringList":return Eo(s,y,i);case"objectList":return ko({schema:r,fieldSchema:n,uiSchema:f,state:y,handlers:i,errors:b,isCustomized:S,path:s});case"json":return So(s,d,i);default:return xo(s,d,i)}}function ho(r,n,e){let s=document.createElement("input");return s.type="checkbox",s.checked=!!n,s.addEventListener("change",()=>e.onFieldChange(r,s.checked)),s}function yo(r,n,e,s,d){let i=document.createElement("div");i.className="options-segmented";let f=e.options||(n.enum||[]).map(y=>({value:y,label:nr(y)}));for(let y of f){let b=document.createElement("button");b.type="button",b.className="options-segmented__option",b.dataset.value=y.value,b.textContent=y.label,y.value===s&&b.classList.add("is-active"),b.addEventListener("click",()=>d.onFieldChange(r,y.value)),i.appendChild(b)}return i}function go(r,n,e,s,d){let i=document.createElement("input");return i.type="number",n.minimum!==void 0&&(i.min=n.minimum),n.maximum!==void 0&&(i.max=n.maximum),e.step!==void 0&&(i.step=e.step),i.value=s??"",i.addEventListener("change",()=>{let f=i.value===""?void 0:Number(i.value);d.onFieldChange(r,f)}),i}function bo(r,n,e,s,d){let i=document.createElement("div");i.className="options-slider";let f=document.createElement("input");f.type="range",f.min=n.minimum??0,f.max=n.maximum??1,f.step=e.step??.01,f.value=s??f.min;let y=document.createElement("span");return y.className="options-slider__display",y.textContent=Qr(s),f.addEventListener("input",()=>{let b=Number(f.value);y.textContent=Qr(b),d.onFieldChange(r,b)}),i.appendChild(f),i.appendChild(y),i}function wo(r,n,e){let s=document.createElement("div");s.className="options-color";let d=document.createElement("span");d.className="options-color__preview",d.style.backgroundColor=n||"#000000";let i=document.createElement("input");return i.type="color",i.value=n||"#000000",i.addEventListener("input",()=>{d.style.backgroundColor=i.value,e.onFieldChange(r,i.value)}),s.appendChild(d),s.appendChild(i),s}function vo(r,n,e,s){let d=document.createElement("select");for(let i of n.enum||[]){let f=document.createElement("option");f.value=i,f.textContent=nr(i),i===e&&(f.selected=!0),d.appendChild(f)}return d.addEventListener("change",()=>s.onFieldChange(r,d.value)),d}function xo(r,n,e){let s=document.createElement("input");return s.type="text",s.value=n??"",s.addEventListener("change",()=>e.onFieldChange(r,s.value)),s}function Eo(r,n,e){let s=document.createElement("div");s.className="options-string-list";let d=Ce(n.formData,r),i;Array.isArray(d)?i=d:d==null||d===""?i=[]:i=[d];let f=document.createElement("div");f.className="options-string-list__items",i.forEach((b,S)=>{let R=document.createElement("div");R.className="options-string-list__item";let _=document.createElement("input");_.type="text",_.value=b??"",_.addEventListener("input",()=>{e.onFieldChange([...r,String(S)],_.value)}),R.appendChild(_);let N=document.createElement("button");N.type="button",N.className="options-link-button",N.textContent="Remove",N.addEventListener("click",()=>e.onRemoveItem(r,S)),R.appendChild(N),f.appendChild(R)});let y=document.createElement("button");return y.type="button",y.className="options-button options-button--ghost",y.textContent="Add entry",y.addEventListener("click",()=>e.onAddItem(r,"")),s.appendChild(f),s.appendChild(y),s}function ko({schema:r,fieldSchema:n,uiSchema:e,state:s,handlers:d,errors:i,isCustomized:f,path:y}){let b=document.createElement("div");b.className="options-object-list";let S=Ce(s.formData,y)||[],R=jo(r,n),_=document.createElement("div");_.className="options-object-list__items",S.forEach((o,p)=>{let u=document.createElement("div");u.className="options-object-list__item";let m=document.createElement("div");m.className="options-object-list__item-header";let g=document.createElement("h4"),j=e.fields[y[0]]?.itemName||"Item";g.textContent=`${j} ${p+1}`,m.appendChild(g);let O=document.createElement("button");O.type="button",O.className="options-link-button",O.textContent="Remove",O.addEventListener("click",()=>d.onRemoveItem(y,p)),m.appendChild(O),u.appendChild(m);let B=document.createElement("div");B.className="options-object-list__item-body";let W=R.properties||{};for(let[Z,$]of Object.entries(W)){let P=[...y,String(p),Z],z=o?o[Z]:void 0,de=en(e,Z,P),A=Xr({fieldName:Z,schema:r,fieldSchema:rr($,z,r),uiField:de,path:P,value:z,errors:i,isCustomized:f,handlers:d,uiSchema:e,state:s,variant:"nested"});B.appendChild(A)}u.appendChild(B),_.appendChild(u)});let N=document.createElement("button");N.type="button",N.className="options-button options-button--ghost";let v=e.fields[y[0]]?.itemName||"Item";return N.textContent=`Add ${v}`,N.addEventListener("click",()=>{let o=Oo(R);d.onAddItem(y,o)}),b.appendChild(_),b.appendChild(N),b}function So(r,n,e){let s=document.createElement("textarea");return s.rows=8,s.className="options-json",s.value=n&&Object.keys(n).length?JSON.stringify(n,null,2):"",s.addEventListener("change",()=>{if(!s.value.trim()){e.onFieldChange(r,{});return}try{let d=JSON.parse(s.value);e.onFieldChange(r,d)}catch{}}),s}function $o(r,n){return n.control?n.control:r.enum?"select":r.type==="boolean"?"switch":r.type==="integer"||r.type==="number"?"number":r.type==="array"?(r.items||{}).type==="string"?"stringList":"objectList":r.type==="object"?"json":"text"}function rr(r,n,e){if(!r)return r;if(r.$ref)return Rt(e,r.$ref);if(!r.oneOf)return r;if(n==null)return r.oneOf[0];for(let s of r.oneOf)if(s.$ref){let d=Rt(e,s.$ref);if(Gr(d,n))return d}else if(Gr(s,n))return s;return r.oneOf[0].$ref?Rt(e,r.oneOf[0].$ref):r.oneOf[0]}function jo(r,n){return n?Array.isArray(n.items)?rr(n.items[0],void 0,r):n.items&&n.items.$ref?Rt(r,n.items.$ref):n.items||{type:"object"}:{type:"object"}}function Rt(r,n){if(!n||!n.startsWith("#/"))return{};let e=n.slice(2).split("/"),s=r;for(let d of e){let i=d.replace(/~1/g,"/").replace(/~0/g,"~");if(s=s?.[i],s===void 0)break}return s||{}}function Gr(r,n){return!r||r.type===void 0?!0:r.type==="array"?Array.isArray(n):r.type==="object"?ze(n):r.type==="integer"?Number.isInteger(n):typeof n===r.type}function Oo(r){let n=r.$ref?{}:r;if(!n.properties)return{};let e={};for(let[s,d]of Object.entries(n.properties))d.default!==void 0?e[s]=fe(d.default):d.type==="array"?e[s]=[]:d.type==="object"?e[s]={}:e[s]="";return e}function en(r,n,e){let s=e.join(".");return r.fields?.[s]||r.fields?.[`${e[0]}[].${n}`]||r.fields?.[n]||{}}function Co(r){let n=new Map;for(let[e,s]of Object.entries(r.properties)){let d=s["ui:section"]||"general";n.has(d)||n.set(d,[]),n.get(d).push(e)}for(let e of n.values())e.sort((s,d)=>s.localeCompare(d));return n}function Ao(r,n){let e=n.join(".");return r.get(e)||[]}function nr(r){return r.toString().replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\s+/g," ").replace(/^./,n=>n.toUpperCase()).trim()}function Qr(r){return r==null||Number.isNaN(r)?"":Number.isInteger(r)?r.toString():r.toFixed(2)}var rn=Le(()=>{tr();gt();t(lo,"renderOptionsForm");t(uo,"createHeader");t(fo,"createErrorBanner");t(po,"renderSection");t(Xr,"renderField");t(mo,"createControl");t(ho,"createSwitchControl");t(yo,"createSegmentedControl");t(go,"createNumberControl");t(bo,"createSliderControl");t(wo,"createColorControl");t(vo,"createSelectControl");t(xo,"createTextControl");t(Eo,"createStringListControl");t(ko,"createObjectListControl");t(So,"createJsonControl");t($o,"resolveControlType");t(rr,"resolveSchemaVariant");t(jo,"resolveItemSchema");t(Rt,"dereferenceSchema");t(Gr,"matchesType");t(Oo,"defaultObjectForSchema");t(en,"resolveUiFieldConfig");t(Co,"groupFieldsBySection");t(Ao,"collectErrorsForPath");t(nr,"humanize");t(Qr,"formatNumber")});var Mo,Se,_t,nn,or,on,sn,an,cn,Io,No,Lo,zo,ln,un=Le(()=>{Mo=Object.getOwnPropertyNames,Se=t((r,n)=>t(function(){return n||(0,r[Mo(r)[0]])((n={exports:{}}).exports,n),n.exports},"__require"),"__commonJS"),_t=Se({"node_modules/@exodus/schemasafe/src/safe-format.js"(r,n){"use strict";var e=class extends String{static{t(this,"SafeString")}},s=new Set(["<",">","<=",">="]),d=t(o=>`\\u${o.toString(16).padStart(4,"0")}`,"escapeCode"),i=t(o=>{if([1/0,-1/0,NaN,void 0,null].includes(o))return`${o}`;if(!["string","boolean","number"].includes(typeof o)){if(typeof o!="object")throw new Error("Unexpected value type");let u=Object.getPrototypeOf(o);if(!(u===Array.prototype&&Array.isArray(o)||u===Object.prototype))throw new Error("Unexpected object given as value")}return JSON.stringify(o).replace(/([{,])"__proto__":/g,'$1["__proto__"]:').replace(/[^\\]"__proto__":/g,()=>{throw new Error("Unreachable")}).replace(/[\u2028\u2029]/g,u=>d(u.charCodeAt(0)))},"jsval"),f=t((o,...p)=>{let u=o.replace(/%[%drscjw]/g,m=>{if(m==="%%")return"%";if(p.length===0)throw new Error("Unexpected arguments count");let g=p.shift();switch(m){case"%d":if(typeof g=="number")return g;throw new Error("Expected a number");case"%r":if(g instanceof RegExp)return f("new RegExp(%j, %j)",g.source,g.flags);throw new Error("Expected a RegExp instance");case"%s":if(g instanceof e)return g;throw new Error("Expected a safe string");case"%c":if(s.has(g))return g;throw new Error("Expected a compare op");case"%j":return i(g);case"%w":if(Number.isInteger(g)&&g>=0)return" ".repeat(g);throw new Error("Expected a non-negative integer for indentation")}throw new Error("Unreachable")});if(p.length!==0)throw new Error("Unexpected arguments count");return new e(u)},"format"),y=t(o=>{if(!/^[a-z][a-z0-9_]*$/i.test(o))throw new Error("Does not look like a safe id");return new e(o)},"safe"),b=t(o=>(...p)=>{if(!p.every(u=>u instanceof e))throw new Error("Unsafe arguments");return new e(o(...p))},"safewrap"),S=t(o=>/^[a-z][a-z0-9_().]*$/i.test(o)||/^\([^()]+\)$/i.test(o)?o:f("(%s)",o),"safepriority"),R=b((...o)=>o.some(p=>`${p}`=="true")?"true":o.join(" || ")||"false"),_=b((...o)=>o.some(p=>`${p}`=="false")?"false":o.join(" && ")||"true"),N=t(o=>`${o}`=="true"?y("false"):`${o}`=="false"?y("true"):f("!%s",S(o)),"safenot"),v=t((...o)=>N(R(...o)),"safenotor");n.exports={format:f,safe:y,safeand:_,safenot:N,safenotor:v}}}),nn=Se({"node_modules/@exodus/schemasafe/src/scope-utils.js"(r,n){"use strict";var{safe:e}=_t(),s=new WeakMap,d=t(i=>{s.has(i)||s.set(i,{sym:new Map,ref:new Map,format:new Map,pattern:new Map});let f=s.get(i),y=t(v=>{f.sym.get(v)||f.sym.set(v,0);let o=f.sym.get(v);return f.sym.set(v,o+1),e(`${v}${o}`)},"gensym"),b=t(v=>{if(f.pattern.has(v))return f.pattern.get(v);let o=y("pattern");return i[o]=new RegExp(v,"u"),f.pattern.set(v,o),o},"genpattern");return f.loop||(f.loop="ijklmnopqrstuvxyz".split("")),{gensym:y,genpattern:b,genloop:t(()=>{let v=f.loop.shift();return f.loop.push(`${v}${v[0]}`),e(v)},"genloop"),getref:t(v=>f.ref.get(v),"getref"),genref:t(v=>{let o=y("ref");return f.ref.set(v,o),o},"genref"),genformat:t(v=>{let o=f.format.get(v);return o||(o=y("format"),i[o]=v,f.format.set(v,o)),o},"genformat")}},"scopeMethods");n.exports={scopeMethods:d}}}),or=Se({"node_modules/@exodus/schemasafe/src/scope-functions.js"(r,n){"use strict";var e=t(o=>/[\uD800-\uDFFF]/.test(o)?[...o].length:o.length,"stringLength"),s=t((o,p,u,m)=>{if(o%p===0)return!0;let g=o*u;if((g===1/0||g===-1/0)&&(g=o),g%m===0)return!0;let j=Math.floor(g+.5);return j/u===o&&j%m===0},"isMultipleOf"),d=t((o,p)=>{if(o===p)return!0;if(!o||!p||typeof o!=typeof p||o!==p&&typeof o!="object")return!1;let u=Object.getPrototypeOf(o);if(u!==Object.getPrototypeOf(p))return!1;if(u===Array.prototype)return!Array.isArray(o)||!Array.isArray(p)||o.length!==p.length?!1:o.every((m,g)=>d(m,p[g]));if(u===Object.prototype){let[m,g]=[Object.keys(o),Object.keys(p)];return m.length!==g.length?!1:new Set([...m,...g]).size===m.length&&m.every(O=>d(o[O],p[O]))}return!1},"deepEqual"),i=t(o=>{if(o.length<2)return!0;if(o.length===2)return!d(o[0],o[1]);let p=[],u=o.length>20?new Set:null,m=0,g=0;for(let j of o){if(typeof j=="object")p.push(j);else if(u){if(u.add(j),u.size!==++m)return!1}else if(o.indexOf(j,g+1)!==-1)return!1;g++}for(let j=1;j<p.length;j++)for(let O=0;O<j;O++)if(d(p[j],p[O]))return!1;return!0},"unique"),f=t(o=>{if(typeof Buffer<"u")return Buffer.from(o,"base64").toString("utf-8");let p=atob(o);return new TextDecoder("utf-8").decode(new Uint8Array(p.length).map((u,m)=>p.charCodeAt(m)))},"deBase64"),y=Function.prototype.call.bind(Object.prototype.hasOwnProperty);y[Symbol.for("toJayString")]="Function.prototype.call.bind(Object.prototype.hasOwnProperty)";var b=t(o=>/~\//.test(o)?`${o}`.replace(/~/g,"~0").replace(/\//g,"~1"):o,"pointerPart"),S=t(o=>o.length===0?"#":`#/${o.map(b).join("/")}`,"toPointer"),R=t(({keywordLocation:o,instanceLocation:p},u,m)=>({keywordLocation:`${u}${o.slice(1)}`,instanceLocation:`${m}${p.slice(1)}`}),"errorMerge"),_=t((o,[p,u])=>p.includes(!0)||p.some(m=>m===o)||u.some(m=>new RegExp(m,"u").test(o)),"propertyIn"),N=t((o,p)=>(o.filter(u=>u[p])[0]||{})[p],"dynamicResolve"),v={toPointer:S,pointerPart:b,errorMerge:R,propertyIn:_,dynamicResolve:N};n.exports={stringLength:e,isMultipleOf:s,deepEqual:d,unique:i,deBase64:f,hasOwn:y,...v}}}),on=Se({"node_modules/@exodus/schemasafe/src/javascript.js"(r,n){"use strict";var{format:e,safe:s}=_t(),{scopeMethods:d}=nn(),i=or(),f=new Map(Object.entries({null:t(o=>e("%s === null",o),"null"),boolean:t(o=>e('typeof %s === "boolean"',o),"boolean"),array:t(o=>e("Array.isArray(%s)",o),"array"),object:t(o=>e('typeof %s === "object" && %s && !Array.isArray(%s)',o,o,o),"object"),number:t(o=>e('typeof %s === "number"',o),"number"),integer:t(o=>e("Number.isInteger(%s)",o),"integer"),string:t(o=>e('typeof %s === "string"',o),"string")})),y=t(({name:o,parent:p,keyval:u,keyname:m})=>{if(o){if(p||u||m)throw new Error("name can be used only stand-alone");return o}if(!p)throw new Error("Can not use property of undefined parent!");let g=y(p);if(u!==void 0){if(m)throw new Error("Can not use key value and name together");if(!["string","number"].includes(typeof u))throw new Error("Invalid property path");return/^[a-z][a-z0-9_]*$/i.test(u)?e("%s.%s",g,s(u)):e("%s[%j]",g,u)}else if(m)return e("%s[%s]",g,m);throw new Error("Unreachable")},"buildName"),b=new Set([].concat(...[Object,Array,String,Number,Boolean].map(o=>Object.getOwnPropertyNames(o.prototype)))),S=t((o,p,u,{unmodifiedPrototypes:m,isJSON:g},j)=>{let{gensym:O,genpattern:B,genloop:W}=d(p,u);return{present:t(A=>{let D=y(A),{parent:T,keyval:G,keyname:oe,inKeys:se,checked:ae}=A;if(ae||se&&g)throw new Error("Unreachable: useless check for undefined");if(se)return e("%s !== undefined",D);if(T&&oe){p.hasOwn=i.hasOwn;let ce=y(T);return g?e("%s !== undefined && hasOwn(%s, %s)",D,ce,oe):e("%s in %s && hasOwn(%s, %s)",oe,ce,ce,oe)}else if(T&&G!==void 0){if(m&&g&&!b.has(`${G}`))return e("%s !== undefined",D);p.hasOwn=i.hasOwn;let ce=y(T);return g?e("%s !== undefined && hasOwn(%s, %j)",D,ce,G):e("%j in %s && hasOwn(%s, %j)",G,ce,ce,G)}throw new Error("Unreachable: present() check without parent")},"present"),forObjectKeys:t((A,D)=>{let T=O("key");o.block(e("for (const %s of Object.keys(%s))",T,y(A)),()=>{D(u(A,T,!0),T)})},"forObjectKeys"),forArray:t((A,D,T)=>{let G=W(),oe=y(A);o.block(e("for (let %s = %s; %s < %s.length; %s++)",G,D,G,oe,G),()=>{T(u(A,G,m,!0),G)})},"forArray"),patternTest:t((A,D)=>{let T=A.replace(/[.^$|*+?(){}[\]\\]/gu,"");if(A===`^${T}$`)return e("(%s === %j)",D,A.slice(1,-1));if(j.has(A))return e("true");if([T,`${T}+`,`${T}.*`,`.*${T}.*`].includes(A))return e("%s.includes(%j)",D,T);if([`^${T}`,`^${T}+`,`^${T}.*`].includes(A))return e("%s.startsWith(%j)",D,T);if([`${T}$`,`.*${T}$`].includes(A))return e("%s.endsWith(%j)",D,T);let G=[...T].slice(0,-1).join("");return[`${T}*`,`${T}?`].includes(A)?G.length===0?e("true"):e("%s.includes(%j)",D,G):[`^${T}*`,`^${T}?`].includes(A)?G.length===0?e("true"):e("%s.startsWith(%j)",D,G):e("%s.test(%s)",B(A),D)},"patternTest"),compare:t((A,D)=>{if(!D||typeof D!="object")return e("%s === %j",A,D);let T,G=t(oe=>oe.length<=3&&oe.every(se=>!se||typeof se!="object"),"shouldInline");if(Array.isArray(D)){if(T=f.get("array")(A),G(D)){let oe=e("%s.length === %d",A,D.length);for(let se=0;se<D.length;se++)oe=e("%s && %s[%d] === %j",oe,A,se,D[se]);return e("%s && %s",T,oe)}}else{T=f.get("object")(A);let[oe,se]=[Object.keys(D),Object.values(D)];if(G(se)){let ae=e("Object.keys(%s).length === %d",A,oe.length);oe.length>0&&(p.hasOwn=i.hasOwn);for(let ce of oe)ae=e("%s && hasOwn(%s, %j)",ae,A,ce);for(let ce of oe)ae=e("%s && %s[%j] === %j",ae,A,ce,D[ce]);return e("%s && %s",T,ae)}}return p.deepEqual=i.deepEqual,e("%s && deepEqual(%s, %j)",T,A,D)},"compare"),propvar:u}},"jsHelpers"),R=/^\([^)]*\) *=>/,_=/^[^=]*=>/,N=Symbol.for("toJayString");function v(o){if(typeof o=="function"){if(o[N])return o[N];if(Object.getPrototypeOf(o)!==Function.prototype)throw new Error("Can not stringify: a function with unexpected prototype");let p=`${o}`;if(o.prototype){if(!/^function[ (]/.test(p))throw new Error("Unexpected function");return p}if(R.test(p)||_.test(p))return p;throw new Error("Can not stringify: only either normal or arrow functions are supported")}else if(typeof o=="object"){let p=Object.getPrototypeOf(o);if(o instanceof RegExp&&p===RegExp.prototype)return e("%r",o);throw new Error("Can not stringify: an object with unexpected prototype")}throw new Error(`Can not stringify: unknown type ${typeof o}`)}t(v,"jaystring"),n.exports={types:f,buildName:y,jsHelpers:S,jaystring:v}}}),sn=Se({"node_modules/@exodus/schemasafe/src/generate-function.js"(r,n){"use strict";var{format:e,safe:s,safenot:d}=_t(),{jaystring:i}=on(),f=/[{[]/,y=/[}\]]/;n.exports=()=>{let b=[],S=0,R=t(v=>{y.test(v.trim()[0])&&S--,b.push({indent:S,code:v}),f.test(v[v.length-1])&&S++},"pushLine"),_=t(()=>{if(S!==0)throw new Error("Unexpected indent at build()");let v=b.map(o=>e("%w%s",o.indent*2,o.code)).join(`
`);return/^[a-z][a-z0-9]*$/i.test(v)?`return ${v}`:`return (${v})`},"build"),N=t(v=>{let o=Object.entries(v);for(let[p,u]of o){if(!/^[a-z][a-z0-9]*$/i.test(p))throw new Error("Unexpected scope key!");if(!(typeof u=="function"||u instanceof RegExp))throw new Error("Unexpected scope value!")}return o},"processScope");return{optimizedOut:!1,size:t(()=>b.length,"size"),write(v,...o){if(typeof v!="string")throw new Error("Format must be a string!");if(v.includes(`
`))throw new Error("Only single lines are supported");return R(e(v,...o)),!0},block(v,o,p=!1){let u=S;this.write("%s {",v);let m=b.length;if(o(),m===b.length)return b.pop(),S=u,!1;if(m===b.length-1&&!p){let{code:g}=b[b.length-1];if(!/^(if|for) /.test(g))return b.length-=2,S=u,this.write("%s %s",v,g)}return this.write("}")},if(v,o,p){`${v}`=="false"?(p&&p(),o&&(this.optimizedOut=!0)):`${v}`=="true"?(o&&o(),p&&(this.optimizedOut=!0)):o&&this.block(e("if (%s)",v),o,!!p)?p&&this.block(e("else"),p):p&&this.if(d(v),p)},makeModule(v={}){return`(function() {
'use strict'
${N(v).map(([p,u])=>`const ${s(p)} = ${i(u)};`).join(`
`)}
${_()}})()`},makeFunction(v={}){let o=N(v),p=o.map(m=>m[0]),u=o.map(m=>m[1]);return Function(...p,`'use strict'
${_()}`)(...u)}}}}}),an=Se({"node_modules/@exodus/schemasafe/src/known-keywords.js"(r,n){"use strict";var e=["$schema","$vocabulary","id","$id","$anchor","$ref","definitions","$defs","$recursiveRef","$recursiveAnchor","$dynamicAnchor","$dynamicRef","type","required","default","enum","const","not","allOf","anyOf","oneOf","if","then","else","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","divisibleBy","items","maxItems","minItems","additionalItems","prefixItems","contains","minContains","maxContains","uniqueItems","maxLength","minLength","format","pattern","contentEncoding","contentMediaType","contentSchema","properties","maxProperties","minProperties","additionalProperties","patternProperties","propertyNames","dependencies","dependentRequired","dependentSchemas","propertyDependencies","unevaluatedProperties","unevaluatedItems","title","description","deprecated","readOnly","writeOnly","examples","$comment","example","discriminator","removeAdditional"],s=["draft/next","draft/2020-12","draft/2019-09","draft-07","draft-06","draft-04","draft-03"],d=s.map(b=>`https://json-schema.org/${b}/schema`),i=["core","applicator","validation","meta-data","format","content"],f=["core","applicator","unevaluated","validation","meta-data","format-annotation","format-assertion","content"],y=[...i.map(b=>`https://json-schema.org/draft/2019-09/vocab/${b}`),...f.map(b=>`https://json-schema.org/draft/2020-12/vocab/${b}`)];n.exports={knownKeywords:e,schemaVersions:d,knownVocabularies:y}}}),cn=Se({"node_modules/@exodus/schemasafe/src/pointer.js"(r,n){"use strict";var{knownKeywords:e}=an();function s(g,j,O,B="keys"){if(!g.has(j))return g.set(j,O);if(g.get(j)!==O)throw new Error(`Conflicting duplicate ${B}: ${j}`)}t(s,"safeSet");function d(g){return g.includes("~")?g.replace(/~[01]/g,j=>{switch(j){case"~1":return"/";case"~0":return"~"}throw new Error("Unreachable")}):g}t(d,"untilde");function i(g,j,O){if(typeof g!="object")throw new Error("Invalid input object");if(typeof j!="string")throw new Error("Invalid JSON pointer");let B=j.split("/");if(!["","#"].includes(B.shift()))throw new Error("Invalid JSON pointer");if(B.length===0)return g;let W=g;for(let Z of B){if(typeof Z!="string")throw new Error("Invalid JSON pointer");O&&O.push(W);let $=d(Z);if(typeof W!="object"||!Object.prototype.hasOwnProperty.call(W,$))return;W=W[$]}return W}t(i,"get");var f=/^https?:\/\//;function y(g,j){if(typeof g!="string"||typeof j!="string")throw new Error("Unexpected path!");if(j.length===0)return g;let O=g.replace(/#.*/,"");return j.startsWith("#")?`${O}${j}`:!O.includes("/")||f.test(j)?j:f.test(O)?`${new URL(j,O)}`:j.startsWith("/")?j:[...O.split("/").slice(0,-1),j].join("/")}t(y,"joinPath");function b(g){return g.map(O=>O&&(O.$id||O.id)||"").filter(O=>O&&typeof O=="string").reduce(y,"")}t(b,"objpath2path");var S=["properties","patternProperties","$defs","definitions"],R=["const","enum","examples","example","comment"],_=Symbol("skip");function N(g,j){let O=t((B,W=!1)=>{if(!B||typeof B!="object")return;let Z=j(B);if(Z!==void 0)return Z===_?void 0:Z;for(let $ of Object.keys(B)){if(!W&&!Array.isArray(B)&&!e.includes($)||!W&&R.includes($))continue;let P=O(B[$],!W&&S.includes($));if(P!==void 0)return P}},"visit");return O(g)}t(N,"traverse");function v(g,j,O,B=""){let W=y(B,O),Z=[],[$,P=""]=W.split("#"),z=decodeURI(P),de=t((A,D,T=!1,G=!1)=>{if(!A||typeof A!="object")return;let oe=A.$id||A.id,se=D;if(oe&&typeof oe=="string"){if(se=y(se,oe),se===W||se===$&&z==="")Z.push([A,g,D]);else if(se===$&&z[0]==="/"){let ce=[],wt=i(A,z,ce);wt!==void 0&&Z.push([wt,g,y(D,b(ce))])}}let ae=G?A.$dynamicAnchor:A.$anchor;if(ae&&typeof ae=="string"){if(ae.includes("#"))throw new Error("$anchor can't include '#'");if(ae.startsWith("/"))throw new Error("$anchor can't start with '/'");se=y(se,`#${ae}`),se===W&&Z.push([A,g,D])}for(let ce of Object.keys(A))!T&&!Array.isArray(A)&&!e.includes(ce)||!T&&R.includes(ce)||de(A[ce],se,!T&&S.includes(ce));!G&&A.$dynamicAnchor&&de(A,D,T,!0)},"visit");if(de(g,$),$===B.replace(/#$/,"")&&(z[0]==="/"||z==="")){let A=[],D=i(g,z,A);D!==void 0&&Z.push([D,g,b(A)])}if(j.has($)&&j.get($)!==g){let A=v(j.get($),j,`#${P}`,$);Z.push(...A.map(([D,T,G])=>[D,T,y($,G)]))}return j.has(W)&&Z.push([j.get(W),j.get(W),W]),Z}t(v,"resolveReference");function o(g){let j=new Map;return N(g,O=>{if(O!==g&&(O.$id||O.id))return _;let B=O.$dynamicAnchor;if(B&&typeof B=="string"){if(B.includes("#"))throw new Error("$dynamicAnchor can't include '#'");if(!/^[a-zA-Z0-9_-]+$/.test(B))throw new Error(`Unsupported $dynamicAnchor: ${B}`);s(j,B,O,"$dynamicAnchor")}}),j}t(o,"getDynamicAnchors");var p=t((g,j)=>N(g,O=>Object.keys(O).some(B=>j.includes(B))||void 0)||!1,"hasKeywords"),u=t((g,j,O=!1)=>{if(!Array.isArray(j))throw new Error("Expected an array of schemas");for(let B of j)N(B,W=>{let Z=W.$id||W.id,$=Z&&typeof Z=="string"?Z.replace(/#$/,""):null;if($&&$.includes("://")&&!$.includes("#"))s(g,$,W,"schema $id in 'schemas'");else if(W===B&&!O)throw new Error("Schema with missing or invalid $id in 'schemas'")});return g},"addSchemasArrayToMap"),m=t((g,j)=>{if(j)return u(m(g),j,!0);if(g)switch(Object.getPrototypeOf(g)){case Object.prototype:return new Map(Object.entries(g));case Map.prototype:return new Map(g);case Array.prototype:return u(new Map,g)}throw new Error("Unexpected value for 'schemas' option")},"buildSchemas");n.exports={get:i,joinPath:y,resolveReference:v,getDynamicAnchors:o,hasKeywords:p,buildSchemas:m}}}),Io=Se({"node_modules/@exodus/schemasafe/src/formats.js"(r,n){"use strict";var e={email:t(i=>{if(i.length>318)return!1;if(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,20}(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,21}){0,2}@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,60}[a-z0-9])?){0,3}$/i.test(i))return!0;if(!i.includes("@")||/(^\.|^"|\.@|\.\.)/.test(i))return!1;let[y,b,...S]=i.split("@");return!y||!b||S.length!==0||y.length>64||b.length>253||!/^[a-z0-9.-]+$/i.test(b)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(y)?!1:b.split(".").every(R=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(R))},"email"),hostname:t(i=>i.length>(i.endsWith(".")?254:253)?!1:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*\.?$/i.test(i),"hostname"),date:t(i=>{if(i.length!==10)return!1;if(i[5]==="0"&&i[6]==="2"){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)$/.test(i))return!0;let f=i.match(/^(\d\d\d\d)-02-29$/);if(!f)return!1;let y=f[1]|0;return y%16===0||y%4===0&&y%25!==0}return i.endsWith("31")?/^\d\d\d\d-(?:0[13578]|1[02])-31$/.test(i):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)$/.test(i)},"date"),time:t(i=>{if(i.length>27||!/^(?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)?$/i.test(i))return!1;if(!/:60/.test(i))return!0;let y=i.match(/([0-9.]+|[^0-9.])/g),b=Number(y[0])*60+Number(y[2]);return y[5]==="+"?b+=1440-Number(y[6]||0)*60-Number(y[8]||0):y[5]==="-"&&(b+=Number(y[6]||0)*60+Number(y[8]||0)),b%1440===1439},"time"),"date-time":t(i=>{if(i.length>38)return!1;let f=/^\d\d\d\d-(?:0[1-9]|1[0-2])-(?:[0-2]\d|3[01])[t\s](?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)$/i,y=i[5]==="0"&&i[6]==="2";if(y&&i[8]==="3"||!f.test(i))return!1;if(i[17]==="6"){let b=i.slice(11).match(/([0-9.]+|[^0-9.])/g),S=Number(b[0])*60+Number(b[2]);if(b[5]==="+"?S+=1440-Number(b[6]||0)*60-Number(b[8]||0):b[5]==="-"&&(S+=Number(b[6]||0)*60+Number(b[8]||0)),S%1440!==1439)return!1}if(y){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)/.test(i))return!0;let b=i.match(/^(\d\d\d\d)-02-29/);if(!b)return!1;let S=b[1]|0;return S%16===0||S%4===0&&S%25!==0}return i[8]==="3"&&i[9]==="1"?/^\d\d\d\d-(?:0[13578]|1[02])-31/.test(i):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)/.test(i)},"date-time"),ipv4:t(i=>i.length<=15&&/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)$/.test(i),"ipv4"),ipv6:t(i=>{if(i.length>45||i.length<2)return!1;let f=0,y=0,b=0,S=!1,R=!1,_=0,N=!0;for(let o=0;o<i.length;o++){let p=i.charCodeAt(o);if(o===1&&_===58&&p!==58)return!1;if(p>=48&&p<=57){if(++b>4)return!1}else if(p===46){if(f>6||y>=3||b===0||R)return!1;y++,b=0}else if(p===58){if(y>0||f>=7)return!1;if(_===58){if(S)return!1;S=!0}else o===0&&(N=!1);f++,b=0,R=!1}else if(p>=97&&p<=102||p>=65&&p<=70){if(y>0||++b>4)return!1;R=!0}else return!1;_=p}if(f<2||y>0&&(y!==3||b===0))return!1;if(S&&i.length===2)return!0;if(y>0&&!/(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}$/.test(i))return!1;let v=y>0?6:7;return S?(N||b>0)&&f<v:f===v&&N&&b>0},"ipv6"),uri:/^[a-z][a-z0-9+\-.]*:(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)?(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2}|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,"json-pointer":/^(?:|\/(?:[^~]|~0|~1)*)$/,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:|#|\/(?:[^~]|~0|~1)*)$/,uuid:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,duration:t(i=>i.length>1&&i.length<80&&(/^P\d+([.,]\d+)?W$/.test(i)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(i)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(i)),"duration")},s={alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"hex-digits":/^[0-9a-f]+$/i,"hex-digits-prefixed":/^0x[0-9a-f]+$/i,"hex-bytes":/^([0-9a-f][0-9a-f])+$/i,"hex-bytes-prefixed":/^0x([0-9a-f][0-9a-f])+$/i,base64:t(i=>i.length%4===0&&/^[a-z0-9+/]*={0,3}$/i.test(i),"base64"),"json-pointer-uri-fragment":/^#(|\/(\/|[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)$/i,"host-name":e.hostname,"ip-address":e.ipv4,color:/^(#[0-9A-Fa-f]{3,6}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s*,\s*([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s*,\s*([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s*\)|rgb\(\s*(\d?\d%|100%)\s*,\s*(\d?\d%|100%)\s*,\s*(\d?\d%|100%)\s*\))$/},d={regex:t(i=>{if(i.length>1e5||/[^\\]\\Z/.test(i))return!1;try{return new RegExp(i,"u"),!0}catch{return!1}},"regex")};n.exports={core:e,extra:s,weak:d}}}),No=Se({"node_modules/@exodus/schemasafe/src/tracing.js"(r,n){"use strict";var e=t((u,m)=>[...new Set([...u,...m])].sort(),"merge"),s=t((u,m)=>u.filter(g=>m.includes(g)),"intersect"),d=t(u=>(...m)=>u(...m.map(y)),"wrapArgs"),i=t(u=>(...m)=>y(u(...m.map(y))),"wrapFull"),f=t((u,m)=>u&&!u.includes(m),"typeIsNot"),y=t(({type:u=null,dyn:m={},...g})=>({type:u&&[...u].sort(),items:f(u,"array")?1/0:g.items||0,properties:f(u,"object")?[!0]:[...g.properties||[]].sort(),patterns:f(u,"object")?[]:[...g.patterns||[]].sort(),required:f(u,"object")?[]:[...g.required||[]].sort(),fullstring:f(u,"string")||g.fullstring||!1,dyn:{item:f(u,"array")?!1:m.item||!1,items:f(u,"array")?0:Math.max(g.items||0,m.items||0),properties:f(u,"object")?[]:e(g.properties||[],m.properties||[]),patterns:f(u,"object")?[]:e(g.patterns||[],m.patterns||[])},unknown:g.unknown&&!(f(u,"object")&&f(u,"array"))||!1}),"normalize"),b=t(()=>y({}),"initTracing"),S=i((u,m)=>({type:u.type&&m.type?s(u.type,m.type):u.type||m.type||null,items:Math.max(u.items,m.items),properties:e(u.properties,m.properties),patterns:e(u.patterns,m.patterns),required:e(u.required,m.required),fullstring:u.fullstring||m.fullstring,dyn:{item:u.dyn.item||m.dyn.item,items:Math.max(u.dyn.items,m.dyn.items),properties:e(u.dyn.properties,m.dyn.properties),patterns:e(u.dyn.patterns,m.dyn.patterns)},unknown:u.unknown||m.unknown})),R=t((u,m)=>m!==!0&&new RegExp(u,"u").test(m),"regtest"),_=t(({properties:u,patterns:m},{properties:g,patterns:j})=>{let O=u.filter($=>g.includes($)||g.includes(!0)||j.some(P=>R(P,$))),B=g.filter($=>u.includes($)||u.includes(!0)||m.some(P=>R(P,$))),W=m.filter($=>j.includes($)||g.includes(!0)),Z=j.filter($=>m.includes($)||u.includes(!0));return{properties:e(O,B),patterns:e(W,Z)}},"intersectProps"),N=t(({properties:u,patterns:m},{properties:g,patterns:j})=>g.every(O=>u.includes(O)||u.includes(!0)||m.some(B=>R(B,O)))&&j.every(O=>m.includes(O)||u.includes(!0)),"inProperties"),v=i((u,m)=>({type:u.type&&m.type?e(u.type,m.type):null,items:Math.min(u.items,m.items),..._(u,m),required:f(u.type,"object")&&m.required||f(m.type,"object")&&u.required||s(u.required,m.required),fullstring:u.fullstring&&m.fullstring,dyn:{item:u.dyn.item||m.dyn.item,items:Math.max(u.dyn.items,m.dyn.items),properties:e(u.dyn.properties,m.dyn.properties),patterns:e(u.dyn.patterns,m.dyn.patterns)},unknown:u.unknown||m.unknown})),o=t((u,m)=>Object.assign(u,S(u,m)),"applyDelta"),p=d(({unknown:u,items:m,dyn:g,...j})=>({items:m!==1/0&&(u||g.items>m||g.item),properties:!j.properties.includes(!0)&&(u||!N(j,g))}));n.exports={initTracing:b,andDelta:S,orDelta:v,applyDelta:o,isDynamic:p,inProperties:N}}}),Lo=Se({"node_modules/@exodus/schemasafe/src/compile.js"(r,n){"use strict";var{format:e,safe:s,safeand:d,safenot:i,safenotor:f}=_t(),y=sn(),{resolveReference:b,joinPath:S,getDynamicAnchors:R,hasKeywords:_}=cn(),N=Io(),{toPointer:v,...o}=or(),{scopeMethods:p}=nn(),{buildName:u,types:m,jsHelpers:g}=on(),{knownKeywords:j,schemaVersions:O,knownVocabularies:B}=an(),{initTracing:W,andDelta:Z,orDelta:$,applyDelta:P,isDynamic:z,inProperties:de}=No(),A=new Set(["^[\\s\\S]*$","^[\\S\\s]*$","^[^]*$","",".*","^","$"]),D=["null","boolean","number","integer","string"],T=new Map(Object.entries({boolean:t(I=>typeof I=="boolean","boolean"),array:t(I=>Array.isArray(I)&&Object.getPrototypeOf(I)===Array.prototype,"array"),object:t(I=>I&&Object.getPrototypeOf(I)===Object.prototype,"object"),finite:t(I=>Number.isFinite(I),"finite"),natural:t(I=>Number.isInteger(I)&&I>=0,"natural"),string:t(I=>typeof I=="string","string"),jsonval:t(I=>o.deepEqual(I,JSON.parse(JSON.stringify(I))),"jsonval")})),G=T.get("object"),oe=t(I=>G(I)||typeof I=="boolean","isSchemaish"),se=t(I=>o.deepEqual(I,{type:[]}),"deltaEmpty"),ae=t((I,Q)=>O.indexOf(I)>O.indexOf(`https://json-schema.org/${Q}/schema`),"schemaIsOlderThan"),ce=t((I,Q)=>{let q=`${I}`.replace(/^http:\/\//,"https://").replace(/#$/,"");return O.includes(q)?ae(q,Q):!0},"schemaIsUnkownOrOlder"),wt=t((I,Q,q=!1,X=!1)=>Object.freeze({parent:I,keyname:Q,inKeys:q,number:X}),"propvar"),yn=t((I,Q,q=!1)=>Object.freeze({parent:I,keyval:Q,checked:q}),"propimm"),Pt=Symbol("evaluatedStatic"),Re=Symbol("optDynamic"),Ze=Symbol("optDynAnchors"),lt=Symbol("optRecAnchors"),gn=t(I=>{if(typeof I=="boolean")return I;if(G(I)&&Object.keys(I).length===0)return!0},"constantValue"),_e=new Set,ut=new Map,bn=t((I,Q,q,X)=>{if(Q){let pe=Q.replace(/^http:\/\//,"https://").replace(/#$/,"");q(O.includes(pe),"Unexpected schema version:",pe),ut.set(I,{exclusiveRefs:ae(pe,"draft/2019-09"),contentValidation:ae(pe,"draft/2019-09"),dependentUnsupported:ae(pe,"draft/2019-09"),newItemsSyntax:!ae(pe,"draft/2020-12"),containsEvaluates:!ae(pe,"draft/2020-12"),objectContains:!ae(pe,"draft/next"),bookending:ae(pe,"draft/next")})}else q(!X,"[requireSchema] $schema is required"),ut.set(I,{})},"generateMeta"),sr=t((I,Q,q,X,pe="")=>{let{mode:Ae="default",useDefaults:ir=!1,removeAdditional:Ye=!1,includeErrors:Ee=!1,allErrors:be=!1,contentValidation:ar,dryRun:Wo,lint:dt=!1,allowUnusedKeywords:We=q.mode==="lax"||q.mode==="spec",allowUnreachable:wn=q.mode==="lax"||q.mode==="spec",requireSchema:Ut=q.mode==="strong",requireValidation:xt=q.mode==="strong",requireStringValidation:Et=q.mode==="strong",forbidNoopValues:vn=q.mode==="strong",complexityChecks:cr=q.mode==="strong",unmodifiedPrototypes:xn=!1,isJSON:lr=!1,$schemaDefault:ur=null,formatAssertion:dr=q.mode!=="spec"||ce(Q.$schema,"draft/2019-09"),formats:fr={},weakFormats:pr=q.mode!=="strong",extraFormats:En=!1,schemas:Ge,...mr}=q,kn={...N.core,...pr?N.weak:{},...En?N.extra:{},...fr};if(Object.keys(mr).length!==0)throw new Error(`Unknown options: ${Object.keys(mr).join(", ")}`);if(!["strong","lax","default","spec"].includes(Ae))throw new Error(`Invalid mode: ${Ae}`);if(!Ee&&be)throw new Error("allErrors requires includeErrors to be enabled");if(Ut&&ur)throw new Error("requireSchema forbids $schemaDefault");if(Ae==="strong"){let ye={...{requireValidation:xt,requireStringValidation:Et},formatAssertion:dr,complexityChecks:cr,requireSchema:Ut},U={weakFormats:pr,allowUnusedKeywords:We};for(let[w,ue]of Object.entries(ye))if(!ue)throw new Error(`Strong mode demands ${w}`);for(let[w,ue]of Object.entries(U))if(ue)throw new Error(`Strong mode forbids ${w}`)}let{gensym:xe,getref:Sn,genref:$n,genformat:hr}=p(X),jn=t(he=>{let ye=[],U=he;for(;U;)U.name||ye.unshift(U),U=U.parent||U.errorParent;if(ye.every(ke=>ke.keyval!==void 0))return e("%j",v(ye.map(ke=>ke.keyval)));let w=["#"],ue=t(()=>{let ke=w.map(o.pointerPart).join("/");return w.length=0,ke},"stringJoined"),$e=null;for(let{keyname:ke,keyval:jt,number:Je}of ye)if(ke){Je||(X.pointerPart=o.pointerPart);let Xe=Je?ke:e("pointerPart(%s)",ke),K=`${ue()}/`;$e=$e?e("%s+%j+%s",$e,K,Xe):e("%j+%s",K,Xe)}else jt&&w.push(jt);return w.length>0?e("%s+%j",$e,`/${ue()}`):$e},"buildPath"),Me=$n(I),kt=null,yr=t((...he)=>{let ye=kt(...he);return yr.errors=kt.errors,ye},"wrap");X[Me]=yr;let On=_(I,["$ref","$recursiveRef","$dynamicRef"]),Ft=q[Ze]&&On&&_(I,["$dynamicAnchor"]),Cn=t(()=>q[Ze]?e(Ft?", dynAnchors = []":", dynAnchors"):e(""),"dynAnchorsHead"),An=q[lt]?e(", recursive"):e(""),E=y();E.write("function validate(data%s%s) {",An,Cn()),Ee&&E.write("validate.errors = null"),be&&E.write("let errorCount = 0"),q[Re]&&E.write("validate.evaluatedDynamic = null");let gr=q[Ze]?e(", dynAnchors"):e("");Ft&&(E.write("const dynLocal = [{}]"),gr=e(", [...dynAnchors, dynLocal[0] || []]"));let Mn=g(E,X,wt,{unmodifiedPrototypes:xn,isJSON:lr},A),{present:Ie,forObjectKeys:St,forArray:Tt,patternTest:In,compare:Bt}=Mn,He=[],me=t(()=>ut.get(Q),"getMeta"),Qe=pe?[pe]:[],qt=t((he,ye,U,w,ue,$e={},{constProp:ke}={})=>{let jt=ye.length>0&&ye[ye.length-1].prop===U,Je=t(()=>ye.filter(a=>a.prop===U),"queryCurrent"),Xe=!U.parent||U.checked||U.inKeys&&lr||Je().length>0,K=u(U),Ve=t((...a)=>yn(U,...a),"currPropImm"),De=t(({path:a=[],prop:l=U,source:h,suberr:x})=>{let c=v([...ue,...a]),k=Ee?jn(l):null;if(Ee===!0&&he&&h){X.errorMerge=o.errorMerge;let C=[h,c,k];be?(E.write("if (validate.errors === null) validate.errors = []"),E.write("validate.errors.push(...%s.map(e => errorMerge(e, %j, %s)))",...C)):E.write("validate.errors = [errorMerge(%s[0], %j, %s)]",...C)}else if(Ee===!0&&he){let C=e("{ keywordLocation: %j, instanceLocation: %s }",c,k);be?(E.write("if (%s === null) %s = []",he,he),E.write("%s.push(%s)",he,C)):E.write("%s = [%s]",he,C)}x&&Mr(x),be?E.write("errorCount++"):E.write("return false")},"error"),we=t((a,l)=>E.if(a,()=>De(l)),"errorIf");dt&&!X.lintErrors&&(X.lintErrors=[]);let Ne=t((a,l)=>{let h=l!==void 0?` ${JSON.stringify(l)}`:"",x=S(pe,v(ue)),c=`${a}${h} at ${x}`;if(dt)return X.lintErrors.push({message:c,keywordLocation:x,schema:I});throw new Error(c)},"fail"),Ht=t((a,l)=>{try{return In(a,l)}catch(h){return Ne(h.message),e("false")}},"patternTestSafe"),H=t((a,...l)=>a||Ne(...l),"enforce"),ft=t((a,...l)=>H(Ae==="lax"||Ae==="spec"||a,...l),"laxMode"),Pe=t((a,l)=>ft(!(w[l]<w[a]),`Invalid ${a} / ${l} combination`),"enforceMinMax"),Ue=t((a,l="should be specified")=>H(!xt,`[requireValidation] ${a} ${l}`),"enforceValidation"),le=t((...a)=>[...ue,...a],"subPath"),et=t(a=>H(!Ye&&!ir,`[removeAdditional/useDefaults] uncertain: ${a}`),"uncertain"),br=t((a,l)=>H(!cr,`[complexityChecks] ${a}`,l),"complex"),wr=t(a=>bn(Q,a||ur,H,Ut),"saveMeta"),J=W(),ee=t(a=>P(J,a),"evaluateDelta");if(typeof w=="boolean")return w===!0?(Ue("schema = true","is not allowed"),{stat:J}):(we(Xe||U.inKeys?!0:Ie(U),{}),ee({type:[]}),{stat:J});H(G(w),"Schema is not an object");for(let a of Object.keys(w))H(j.includes(a)||We,"Keyword not supported:",a);if(Object.keys(w).length===0)return Ue("empty rules node","is not allowed"),{stat:J};let Fe=new Set(Object.keys(w)),vr=new Set,Te=t((a,...l)=>{H(vr.has(a)||Fe.has(a),"Unexpected double consumption:",a),H(o.hasOwn(w,a),"Is not an own property:",a),H(l.every(h=>T.has(h)),"Invalid type used in consume"),H(l.some(h=>T.get(h)(w[a])),"Unexpected type for",a),Fe.delete(a)},"consume"),xr=t((a,...l)=>(w[a]!==void 0&&Te(a,...l),w[a]),"get"),L=t((a,l,h,x={})=>{if(w[a]===void 0)return!1;if(Te(a,...l),h!==null)try{let c=h(w[a]);c!==null&&we(c,{path:[a],...x})}catch(c){if(dt&&!c.message.startsWith("[opt] "))Ne(c.message);else throw c}return!0},"handle");if(w===Q?(wr(xr("$schema","string")),L("$vocabulary",["object"],a=>{for(let[l,h]of Object.entries(a))h!==!1&&H(h===!0&&B.includes(l),"Unknown vocabulary:",l);return null})):me()||wr(Q.$schema),me().objectContains)for(let a of["contains","minContains","maxContains"])vr.add(a);L("examples",["array"],null),L("example",["jsonval"],null);for(let a of["title","description","$comment"])L(a,["string"],null);for(let a of["deprecated","readOnly","writeOnly"])L(a,["boolean"],null);L("$defs",["object"],null)||L("definitions",["object"],null);let pt=t((a,l,h)=>a===I?s("validate"):Sn(a)||sr(a,l,q,X,h),"compileSub"),Be=t(()=>Qe.length>0?Qe[Qe.length-1]:"","basePath"),Nn=Qe.length,Er=t(a=>(Qe.push(S(Be(),a)),null),"setId");(!me().exclusiveRefs||!w.$ref)&&(L("$id",["string"],Er)||L("id",["string"],Er),L("$anchor",["string"],null),L("$dynamicAnchor",["string"],null),(w.$recursiveAnchor||!vn)&&L("$recursiveAnchor",["boolean"],a=>(a&&He.push([w,Q,Be()]),null)));let kr=Ft&&(w===I||w.id||w.$id);if(kr){let a=R(w);w!==I&&E.write("dynLocal.unshift({})");for(let[l,h]of a){let x=b(Q,Ge,`#${l}`,Be()),[c,k,C]=x[0]||[];H(c===h,`Unexpected $dynamicAnchor resolution: ${l}`);let F=pt(c,k,C);E.write("dynLocal[0][%j] = %s",`#${l}`,F)}}let Jt=t(a=>q[Re]&&(w[a]||w[a]===!1||w===I),"needUnevaluated"),ve=Object.freeze({item:Jt("unevaluatedItems")?xe("evaluatedItem"):null,items:Jt("unevaluatedItems")?xe("evaluatedItems"):null,props:Jt("unevaluatedProperties")?xe("evaluatedProps"):null}),ne=Object.freeze({item:ve.item||$e.item,items:ve.items||$e.items,props:ve.props||$e.props}),Sr=t(()=>(!ne.items||J.items===1/0)&&(!ne.props||J.properties.includes(!0)),"canSkipDynamic"),je=t(a=>{if(ne.item&&a.item&&J.items!==1/0&&E.write("%s.push(%s)",ne.item,a.item),ne.items&&a.items>J.items&&E.write("%s.push(%d)",ne.items,a.items),ne.props&&(a.properties||[]).includes(!0)&&!J.properties.includes(!0))E.write("%s[0].push(true)",ne.props);else if(ne.props){let l=t((c,k)=>de(J,{properties:c,patterns:k}),"inStat"),h=(a.properties||[]).filter(c=>!l([c],[])),x=(a.patterns||[]).filter(c=>!l([],[c]));h.length>0&&E.write("%s[0].push(...%j)",ne.props,h),x.length>0&&E.write("%s[1].push(...%j)",ne.props,x);for(let c of a.propertiesVars||[])E.write("%s[0].push(%s)",ne.props,c)}},"evaluateDeltaDynamic"),$r=t((a,l,h,x)=>{z(J).items&&a.item&&l&&E.write("%s.push(...%s)",a.item,l),z(J).items&&a.items&&h&&E.write("%s.push(...%s)",a.items,h),z(J).properties&&a.props&&x&&(E.write("%s[0].push(...%s[0])",a.props,x),E.write("%s[1].push(...%s[1])",a.props,x))},"applyDynamicToDynamic"),Ln=t(()=>q[lt]?He.length===0?e(", recursive"):e(", recursive || %s",pt(...He[0])):e(""),"makeRecursive"),Ot=t((a,l)=>{let h=X[a]&&X[a][Pt]||{unknown:!0};ee(h);let x=e("%s(%s%s%s)",a,K,Ln(),gr);if(!Ee&&Sr())return e("!%s",x);let c=xe("res"),k=xe("err"),C=xe("suberr");return Ee&&E.write("const %s = validate.errors",k),E.write("const %s = %s",c,x),Ee&&E.write("const %s = %s.errors",C,a),Ee&&E.write("validate.errors = %s",k),we(i(c),{...l,source:C}),E.if(c,()=>{let F=z(h).items?e("%s.evaluatedDynamic[0]",a):null,V=z(h).items?e("%s.evaluatedDynamic[1]",a):null,Y=z(h).properties?e("%s.evaluatedDynamic[2]",a):null;$r(ne,F,V,Y)}),null},"applyRef"),jr=t((a,l)=>a&&a.every(h=>l.includes(h)),"allIn"),Or=t((a,l)=>l.some(h=>a===null||a.includes(h)),"someIn"),Cr=t((...a)=>Je().some(l=>jr(l.stat.type,a)),"parentCheckedType"),zn=t((...a)=>jr(J.type,a)||Cr(...a),"definitelyType"),tt=t((...a)=>Or(J.type,a)&&Je().every(l=>Or(l.stat.type,a)),"typeApplicable"),Vt=t((a,l=w)=>{H(typeof a=="string","Invalid pattern:",a),(xt||Et)&&H(/^\^.*\$$/.test(a),"Should start with ^ and end with $:",a),/([{+*].*[{+*]|\)[{+*]|^[^^].*[{+*].)/.test(a)&&l.maxLength===void 0&&br("maxLength should be specified for pattern:",a)},"enforceRegex"),Rn=w.pattern&&!A.has(w.pattern),_n=w.uniqueItems||Rn||w.patternProperties||w.format,Ct=be&&_n?xe("prev"):null,At=t((a,l)=>E.if(a&&Ct!==null?e("errorCount === %s",Ct):!0,l),"prevWrap"),Ar=t(()=>[...ye,{stat:J,prop:U}],"nexthistory"),ge=t((...a)=>qt(he,Ar(),...a).stat,"rule"),Ke=t((a,...l)=>{if(l[0]===U){let c=gn(l[1]);if(c===!0)return{sub:e("true"),delta:{}};if(c===!1)return{sub:e("false"),delta:{type:[]}}}let h=xe("sub");E.write("const %s = (() => {",h),be&&E.write("let errorCount = 0");let{stat:x}=qt(a,Ar(),...l);return be?E.write("return errorCount === 0"):E.write("return true"),E.write("})()"),{sub:h,delta:x}},"subrule"),Kt=t(()=>{let a=Ee&&be?xe("suberr"):null;return a&&E.write("let %s = null",a),a},"suberror"),Mr=t(a=>{he===null||a===null||E.if(a,()=>E.write("%s.push(...%s)",he,a))},"mergeerror"),Ir=t(()=>{if(!Ye)return!1;if(Ye===!0)return!0;if(Ye==="keyword")return w.removeAdditional?(Te("removeAdditional","boolean"),!0):!1;throw new Error(`Invalid removeAdditional: ${Ye}`)},"willRemoveAdditional"),Mt=t((a,l,h)=>{L(a,["object","boolean"],c=>c===!1&&Ir()?(E.write("if (%s.length > %s) %s.length = %s",K,l,K,l),null):c===!1&&!h?e("%s.length > %s",K,l):(Tt(U,l,(k,C)=>(h&&E.write("if (%s) continue",h(C)),ge(k,c,le(a)))),null))&&ee({items:1/0})},"additionalItems"),Zt=t((a,l)=>{L(a,["object","boolean"],x=>(St(U,(c,k)=>{E.if(l(k),()=>{x===!1&&Ir()?E.write("delete %s[%s]",K,k):ge(c,x,le(a))})}),null))&&ee({properties:[!0]})},"additionalProperties"),Nr=t((a,l,h)=>d(...l.map(x=>e("%s !== %j",a,x)),...h.map(x=>i(Ht(x,a)))),"additionalCondition"),Lr=t((a,l)=>{let h=l.map(c=>new RegExp(c,"u")),x=t(c=>a.includes(c)||h.some(k=>k.test(c)),"known");for(let c of J.required)H(x(c),"Unknown required property:",c)},"lintRequired"),zr=[],Dn=t(()=>{let a=t((h,x)=>e("!(%d %c %s)",h,x,K),"minMax");Number.isFinite(w.exclusiveMinimum)?L("exclusiveMinimum",["finite"],h=>a(h,"<")):(L("minimum",["finite"],h=>a(h,w.exclusiveMinimum?"<":"<=")),L("exclusiveMinimum",["boolean"],null)),Number.isFinite(w.exclusiveMaximum)?(L("exclusiveMaximum",["finite"],h=>a(h,">")),Pe("minimum","exclusiveMaximum"),Pe("exclusiveMinimum","exclusiveMaximum")):w.maximum!==void 0&&(L("maximum",["finite"],h=>a(h,w.exclusiveMaximum?">":">=")),L("exclusiveMaximum",["boolean"],null),Pe("minimum","maximum"),Pe("exclusiveMinimum","maximum"));let l=w.multipleOf===void 0?"divisibleBy":"multipleOf";L(l,["finite"],h=>{H(h>0,`Invalid ${l}:`,h);let[x,c]=`${h}`.split("e-"),C=`${x}.`.split(".")[1].length+(c?Number(c):0);if(Number.isInteger(h*2**C))return e("%s %% %d !== 0",K,h);X.isMultipleOf=o.isMultipleOf;let F=[K,h,C,Math.round(h*Math.pow(10,C))];return e("!isMultipleOf(%s, %d, 1e%d, %d)",...F)})},"checkNumbers"),Pn=t(()=>{L("maxLength",["natural"],a=>(X.stringLength=o.stringLength,e("%s.length > %d && stringLength(%s) > %d",K,a,K,a))),L("minLength",["natural"],a=>(X.stringLength=o.stringLength,e("%s.length < %d || stringLength(%s) < %d",K,a,K,a))),Pe("minLength","maxLength"),At(!0,()=>{let a=t((c,k,C=kn)=>{let F=typeof c=="string"&&o.hasOwn(C,c);H(F,"Unrecognized format used:",c);let V=C[c],Y=V instanceof RegExp||typeof V=="function";return H(Y,"Invalid format used:",c),dr?V instanceof RegExp?(o.hasOwn(fr,c)&&Vt(V.source),e("!%s.test(%s)",hr(V),k)):e("!%s(%s)",hr(V),k):null},"checkFormat");L("format",["string"],c=>(ee({fullstring:!0}),a(c,K))),L("pattern",["string"],c=>(Vt(c),ee({fullstring:!0}),A.has(c)?null:i(Ht(c,K)))),H(w.contentSchema!==!1,"contentSchema cannot be set to false");let l=ar===void 0?me().contentValidation:ar,h=w.contentEncoding||w.contentMediaType||w.contentSchema;if(H(!h||l||We,'"content*" keywords are disabled by default per spec, enable with { contentValidation = true } option (see doc/Options.md for more info)'),h&&l){let c=xe("dec");w.contentMediaType&&E.write("let %s = %s",c,K),w.contentEncoding==="base64"?(we(a("base64",K,N.extra),{path:["contentEncoding"]}),w.contentMediaType&&(X.deBase64=o.deBase64,E.write("try {"),E.write("%s = deBase64(%s)",c,c)),Te("contentEncoding","string")):H(!w.contentEncoding,"Unknown contentEncoding:",w.contentEncoding);let k=!1;if(w.contentMediaType==="application/json"?(E.write("try {"),E.write("%s = JSON.parse(%s)",c,c),k=!0,Te("contentMediaType","string")):H(!w.contentMediaType,"Unknown contentMediaType:",w.contentMediaType),w.contentSchema){H(k,"contentSchema requires contentMediaType application/json");let C=Object.freeze({name:c,errorParent:U});ge(C,w.contentSchema,le("contentSchema")),Te("contentSchema","object","array"),ee({fullstring:!0})}w.contentMediaType&&(E.write("} catch (e) {"),De({path:["contentMediaType"]}),E.write("}"),w.contentEncoding&&(E.write("} catch (e) {"),De({path:["contentEncoding"]}),E.write("}")))}})},"checkStrings"),Un=t(()=>{L("maxItems",["natural"],c=>{let k=me().newItemsSyntax?"prefixItems":"items";return Array.isArray(w[k])&&w[k].length>c&&Ne(`Invalid maxItems: ${c} is less than ${k} array length`),e("%s.length > %d",K,c)}),L("minItems",["natural"],c=>e("%s.length < %d",K,c)),Pe("minItems","maxItems");let a=t(c=>{for(let k=0;k<c.length;k++)ge(Ve(k),c[k],le(`${k}`));return ee({items:c.length}),null},"checkItemsArray");me().newItemsSyntax?(L("prefixItems",["array"],a),Mt("items",e("%d",(w.prefixItems||[]).length))):Array.isArray(w.items)?(L("items",["array"],a),Mt("additionalItems",e("%d",w.items.length))):L("items",["object","boolean"],c=>(Tt(U,e("0"),k=>ge(k,c,le("items"))),ee({items:1/0}),null)),Rr(c=>{Tt(U,e("0"),(k,C)=>{c(k,()=>{ee({dyn:{item:!0}}),je({item:C})})})});let l=t(c=>{if(!G(c))return!1;if(c.enum||o.hasOwn(c,"const")||c.type&&(Array.isArray(c.type)?c.type:[c.type]).every(C=>D.includes(C)))return!0;if(c.$ref){let[k]=b(Q,Ge,c.$ref,Be())[0]||[];if(l(k))return!0}return!1},"itemsSimple"),h=t(c=>c===!1||l(c),"itemsSimpleOrFalse"),x=t(()=>!!(w.maxItems!==void 0||h(w.items)||Array.isArray(w.items)&&h(w.additionalItems)),"uniqueSimple");At(!0,()=>{L("uniqueItems",["boolean"],c=>c===!1?null:(x()||br("maxItems should be specified for non-primitive uniqueItems"),Object.assign(X,{unique:o.unique,deepEqual:o.deepEqual}),e("!unique(%s)",K)))})},"checkArrays"),rt=t(a=>!be&&(J.required.includes(a)||Je().some(l=>l.stat.required.includes(a))),"checked"),Fn=t(()=>{let a=e("Object.keys(%s).length",K);L("maxProperties",["natural"],l=>e("%s > %d",a,l)),L("minProperties",["natural"],l=>e("%s < %d",a,l)),Pe("minProperties","maxProperties"),L("propertyNames",["object","boolean"],l=>(St(U,(h,x)=>{let c=typeof l=="object"&&!l.$ref?{type:"string",...l}:l,k=Object.freeze({name:x,errorParent:h,type:"string"});ge(k,c,le("propertyNames"))}),null)),L("required",["array"],l=>{for(let h of l){if(rt(h))continue;let x=Ve(h);we(i(Ie(x)),{path:["required"],prop:x})}return ee({required:l}),null});for(let l of["dependencies","dependentRequired","dependentSchemas"])l!=="dependencies"&&me().dependentUnsupported||L(l,["object"],h=>{for(let x of Object.keys(h)){let c=typeof h[x]=="string"?[h[x]]:h[x],k=Ve(x,rt(x));if(Array.isArray(c)&&l!=="dependentSchemas"){let C=c.filter(Y=>!rt(Y)).map(Y=>Ie(Ve(Y))),F=i(d(...C)),V={path:[l,x]};C.length===0||(k.checked?(we(F,V),ee({required:c})):we(d(Ie(k),F),V))}else oe(c)&&l!=="dependentRequired"?(et(l),E.if(k.checked?!0:Ie(k),()=>{let C=ge(U,c,le(l,x),ne);ee($({},C)),je(C)})):Ne(`Unexpected ${l} entry`)}return null});L("propertyDependencies",["object"],l=>{for(let[h,x]of Object.entries(l)){H(G(x),"propertyDependencies must be an object"),et("propertyDependencies");let c=Ve(h,rt(h));E.if(c.checked?!0:Ie(c),()=>{for(let[k,C]of Object.entries(x))H(oe(C),"propertyDependencies must contain schemas"),E.if(Bt(u(c),k),()=>{let F=ge(U,C,le("propertyDependencies",h,k),ne);ee($({},F)),je(F)})})}return null}),L("properties",["object"],l=>{for(let h of Object.keys(l))ke!==h&&ge(Ve(h,rt(h)),l[h],le("properties",h));return ee({properties:Object.keys(l)}),null}),At(w.patternProperties,()=>{if(L("patternProperties",["object"],l=>(St(U,(h,x)=>{for(let c of Object.keys(l))Vt(c,w.propertyNames||{}),E.if(Ht(c,x),()=>{ge(h,l[c],le("patternProperties",c))})}),ee({patterns:Object.keys(l)}),null)),w.additionalProperties||w.additionalProperties===!1){let l=Object.keys(w.properties||{}),h=Object.keys(w.patternProperties||{});w.additionalProperties===!1&&zr.push(()=>Lr(l,h)),Zt("additionalProperties",t(c=>Nr(c,l,h),"condition"))}}),me().objectContains&&Rr(l=>{St(U,(h,x)=>{l(h,()=>{ee({dyn:{properties:[!0]}}),je({propertiesVars:[x]})})})})},"checkObjects"),Tn=t(()=>{let a=L("const",["jsonval"],h=>i(Bt(K,h)));if(a&&!We)return!0;let l=L("enum",["array"],h=>{let x=h.filter(k=>k&&typeof k=="object"),c=h.filter(k=>!(k&&typeof k=="object"));return f(...[...c,...x].map(k=>Bt(K,k)))});return a||l},"checkConst"),Rr=t(a=>{L("contains",["object","boolean"],()=>{et("contains"),me().objectContains&&tt("array")&&tt("object")&&Ue("possible type confusion in 'contains',","forbid 'object' or 'array'");let l=xe("passes");E.write("let %s = 0",l);let h=Kt();return a((x,c)=>{let{sub:k}=Ke(h,x,w.contains,le("contains"));E.if(k,()=>{E.write("%s++",l),me().containsEvaluates&&(H(!Ye,`Can't use removeAdditional with draft2020+ "contains"`),c())})}),L("minContains",["natural"],x=>e("%s < %d",l,x),{suberr:h})||we(e("%s < 1",l),{path:["contains"],suberr:h}),L("maxContains",["natural"],x=>e("%s > %d",l,x)),Pe("minContains","maxContains"),null})},"checkContains"),Bn=t(()=>{L("not",["object","boolean"],c=>Ke(null,U,c,le("not")).sub),w.not&&et("not"),(w.then||w.then===!1||w.else||w.else===!1||We)&&L("if",["object","boolean"],c=>{et("if/then/else");let{sub:k,delta:C}=Ke(null,U,c,le("if"),ne),F,V,Y,te;return L("else",["object","boolean"],re=>(F=t(()=>{Y=ge(U,re,le("else"),ne),je(Y)},"handleElse"),null)),L("then",["object","boolean"],re=>(V=t(()=>{te=ge(U,re,le("then"),ne),je(Z(C,te))},"handleThen"),null)),!V&&!se(C)&&(V=t(()=>je(C),"handleThen")),E.if(k,V,F),ee($(Y||{},Z(C,te||{}))),null});let l=t((c,k="allOf")=>{H(c.length>0,`${k} cannot be empty`);for(let[C,F]of Object.entries(c))ee(ge(U,F,le(k,C),ne));return null},"performAllOf");L("allOf",["array"],c=>l(c));let h=null;L("discriminator",["object"],c=>{let k=new Set,C=t((ie,ot,st)=>H(ie,`[discriminator]: ${ot}`,st),"fix"),{propertyName:F,mapping:V,...Y}=c,te=Ve(F);C(F&&!w.oneOf!=!w.anyOf,"need propertyName, oneOf OR anyOf"),C(Object.keys(Y).length===0,'only "propertyName" and "mapping" are supported');let re=t(ie=>G(ie)?Object.keys(ie).length:null,"keylen");return h=t((ie,ot)=>{let st=t(()=>{E.write("switch (%s) {",u(te));let it;for(let[Hn,at]of Object.entries(ie)){let{const:Yt,enum:Pr,...Jn}=(at.properties||{})[F]||{},ht=Yt!==void 0?[Yt]:Pr;if(!ht&&at.$ref){let[Oe]=b(Q,Ge,at.$ref,Be())[0]||[];H(G(Oe),"failed to resolve $ref:",at.$ref);let yt=(Oe.properties||{})[F]||{};ht=yt.const!==void 0?[yt.const]:yt.enum}let Vn=Array.isArray(ht)&&ht.length>0;C(Vn,"branches should have unique string const or enum values for [propertyName]");let Kn=Object.keys(Jn).length===0&&(!Yt||!Pr);C(Kn,"only const OR enum rules are allowed on [propertyName] in branches");for(let Oe of ht){let yt=!V||o.hasOwn(V,Oe)&&V[Oe]===at.$ref;C(yt,"mismatching mapping for",Oe);let Zn=typeof Oe=="string"&&!k.has(Oe);C(Zn,"const/enum values for [propertyName] should be unique strings"),k.add(Oe),E.write("case %j:",Oe)}let Gt=ge(U,at,le(ot,Hn),ne,{constProp:F});je(Gt),it=it?$(it,Gt):Gt,E.write("break")}C(V===void 0||re(V)===k.size,"mismatching mapping size"),ee(it),E.write("default:"),De({path:[ot]}),E.write("}")},"runDiscriminator"),mt=t(()=>{if(rt(F))st();else{let it=["discriminator","propertyName"];E.if(Ie(te),st,()=>De({path:it,prop:te}))}},"propCheck");return be||!o.deepEqual(J.type,["object"])?E.if(m.get("object")(K),mt,()=>De({path:["discriminator"]})):mt(),C(o.deepEqual(J.type,["object"]),"has to be checked for type:","object"),C(J.required.includes(F),"propertyName should be placed in required:",F),null},"handleDiscriminator"),null});let x=t((c,k)=>{let C=k.map(Y=>Y.type||(Array.isArray(Y.const)?"array":typeof Y.const)),F=C.filter(Y=>!D.includes(Y)&&Y!=="array").length,V=C.filter(Y=>!D.includes(Y)&&Y!=="object").length;(F>1||V>1)&&et(`${c}, use discriminator to make it certain`)},"uncertainBranchTypes");L("anyOf",["array"],c=>{if(H(c.length>0,"anyOf cannot be empty"),c.length===1)return l(c);if(h)return h(c,"anyOf");let k=Kt();if(!Sr()){x("anyOf",c);let te=Object.entries(c).map(([re,ie])=>Ke(k,U,ie,le("anyOf",re),ne));ee(te.map(re=>re.delta).reduce((re,ie)=>$(re,ie))),we(f(...te.map(({sub:re})=>re)),{path:["anyOf"],suberr:k});for(let{delta:re,sub:ie}of te)E.if(ie,()=>je(re));return null}let C=c.filter(te=>o.hasOwn(te,"const")),F=c.filter(te=>!o.hasOwn(te,"const"));x("anyOf",F);let V=[...C,...F],Y;if(me().exclusiveRefs){let te=t(()=>De({path:["anyOf"],suberr:k}),"body");for(let[re,ie]of Object.entries(V).reverse()){let ot=te;te=t(()=>{let{sub:st,delta:mt}=Ke(k,U,ie,le("anyOf",re));E.if(i(st),ot),Y=Y?$(Y,mt):mt},"body")}te()}else{let te=Object.entries(c).map(([re,ie])=>Ke(k,U,ie,le("anyOf",re),ne));Y=te.map(re=>re.delta).reduce((re,ie)=>$(re,ie)),we(f(...te.map(({sub:re})=>re)),{path:["anyOf"],suberr:k})}return ee(Y),null}),L("oneOf",["array"],c=>{if(H(c.length>0,"oneOf cannot be empty"),c.length===1)return l(c);if(h)return h(c,"oneOf");x("oneOf",c);let k=xe("passes");E.write("let %s = 0",k);let C=Kt(),F,V=0,Y=Object.entries(c).map(([te,re])=>{!Ee&&V++>1&&we(e("%s > 1",k),{path:["oneOf"]});let ie=Ke(C,U,re,le("oneOf",te),ne);return E.if(ie.sub,()=>E.write("%s++",k)),F=F?$(F,ie.delta):ie.delta,ie});ee(F),we(e("%s !== 1",k),{path:["oneOf"]}),E.if(e("%s === 0",k),()=>Mr(C));for(let te of Y)E.if(te.sub,()=>je(te.delta));return null})},"checkGeneric"),nt=t((a,l,h)=>{let[x,c]=[E.size(),Fe.size];E.if(zn(...l)?!0:h,a),(x!==E.size()||c!==Fe.size)&&H(tt(...l),"Unexpected rules in type",w.type)},"typeWrap"),qn=t(()=>{if(J.items===1/0)w.unevaluatedItems===!1&&Te("unevaluatedItems","boolean");else if(w.unevaluatedItems||w.unevaluatedItems===!1)if(z(J).items){if(!q[Re])throw new Error("[opt] Dynamic unevaluated tracing not enabled");let a=e("Math.max(%d, ...%s)",J.items,ne.items),l=t(h=>e("%s.includes(%s)",ne.item,h),"extra");Mt("unevaluatedItems",a,me().containsEvaluates?l:null)}else Mt("unevaluatedItems",e("%d",J.items))},"checkArraysFinal"),Wn=t(()=>{At(J.patterns.length>0||J.dyn.patterns.length>0||J.unknown,()=>{if(J.properties.includes(!0))w.unevaluatedProperties===!1&&Te("unevaluatedProperties","boolean");else if(w.unevaluatedProperties||w.unevaluatedProperties===!1){let a=t(l=>Nr(l,J.properties,J.patterns),"notStatic");if(z(J).properties){if(!q[Re])throw new Error("[opt] Dynamic unevaluated tracing not enabled");X.propertyIn=o.propertyIn;let l=t(x=>e("!propertyIn(%s, %s)",x,ne.props),"notDynamic");Zt("unevaluatedProperties",t(x=>d(a(x),l(x)),"condition"))}else w.unevaluatedProperties===!1&&Lr(J.properties,J.patterns),Zt("unevaluatedProperties",a)}})},"checkObjectsFinal"),_r=t(()=>{if(Ct!==null&&E.write("const %s = errorCount",Ct),Tn()){let a=[...m.keys()];if(ee({properties:[!0],items:1/0,type:a,fullstring:!0}),!We){H(Fe.size===0,"Unexpected keywords mixed with const or enum:",[...Fe]);return}}nt(Dn,["number","integer"],m.get("number")(K)),nt(Pn,["string"],m.get("string")(K)),nt(Un,["array"],m.get("array")(K)),nt(Fn,["object"],m.get("object")(K)),Bn(),nt(qn,["array"],m.get("array")(K)),nt(Wn,["object"],m.get("object")(K));for(let a of zr)a();$r($e,ve.item,ve.items,ve.props)},"performValidation"),Dr=t(()=>{if(ve.item&&E.write("const %s = []",ve.item),ve.items&&E.write("const %s = [0]",ve.items),ve.props&&E.write("const %s = [[], []]",ve.props),L("$ref",["string"],l=>{let h=b(Q,Ge,l,Be()),[x,c,k]=h[0]||[];if(!x&&x!==!1&&(Ne("failed to resolve $ref:",l),dt))return null;let C=pt(x,c,k),F=x===I?Me:C;if(!X[F])throw new Error("Unexpected: coherence check failed");if(!X[F][Pt]&&x.type){let V=Array.isArray(x.type)?x.type:[x.type];ee({type:V}),xt&&(_e.add(F),V.includes("array")&&ee({items:1/0}),V.includes("object")&&ee({properties:[!0]})),Et&&V.includes("string")&&(_e.add(F),ee({fullstring:!0}))}return Ot(C,{path:["$ref"]})}),me().exclusiveRefs&&(H(!q[Re],"unevaluated* is supported only on draft2019-09 and above"),w.$ref))return;L("$recursiveRef",["string"],l=>{if(!q[lt])throw new Error("[opt] Recursive anchors are not enabled");H(l==="#",'Behavior of $recursiveRef is defined only for "#"');let h=b(Q,Ge,"#",Be()),[x,c,k]=h[0];ft(x.$recursiveAnchor,"$recursiveRef without $recursiveAnchor");let C=pt(x,c,k),F=x.$recursiveAnchor?e("(recursive || %s)",C):C;return Ot(F,{path:["$recursiveRef"]})}),L("$dynamicRef",["string"],l=>{if(!q[Ze])throw new Error("[opt] Dynamic anchors are not enabled");ft(/^[^#]*#[a-zA-Z0-9_-]+$/.test(l),"Unsupported $dynamicRef format");let h=l.replace(/^[^#]+/,""),x=b(Q,Ge,l,Be());if(!x[0]&&!me().bookending){ft(!1,"$dynamicRef bookending resolution failed (even though not required)"),X.dynamicResolve=o.dynamicResolve;let te=e("dynamicResolve(dynAnchors || [], %j)",h);return Ot(te,{path:["$dynamicRef"]})}H(x[0],"$dynamicRef bookending resolution failed",l);let[c,k,C]=x[0],F=c.$dynamicAnchor&&`#${c.$dynamicAnchor}`===h;ft(F,"$dynamicRef without $dynamicAnchor in the same scope");let V=pt(c,k,C);X.dynamicResolve=o.dynamicResolve;let Y=F?e("(dynamicResolve(dynAnchors || [], %j) || %s)",h,V):V;return Ot(Y,{path:["$dynamicRef"]})});let a=null;L("type",["string","array"],l=>{let h=Array.isArray(l)?l:[l];for(let c of h)H(typeof c=="string"&&m.has(c),"Unknown type:",c);if(U.type)return H(o.deepEqual(h,[U.type]),"One type allowed:",U.type),ee({type:[U.type]}),null;if(Cr(...h))return null;let x=h.filter(c=>tt(c));return x.length===0&&Ne("No valid types possible"),ee({type:h}),a=f(...x.map(c=>m.get(c)(K))),null}),a&&be?E.if(a,()=>De({path:["type"]}),_r):(a&&we(a,{path:["type"]}),_r()),J.items<1/0&&w.maxItems<=J.items&&ee({items:1/0})},"writeMain");if(w.default!==void 0&&ir){Xe&&Ne("Can not apply default value here (e.g. at root)");let a=xr("default","jsonval");E.if(Ie(U),Dr,()=>E.write("%s = %j",K,a))}else L("default",["jsonval"],null),E.if(Xe?!0:Ie(U),Dr);if(Qe.length=Nn,He[0]&&He[He.length-1][0]===w&&He.pop(),kr&&w!==I&&E.write("dynLocal.shift()"),wn||H(!E.optimizedOut,"some checks are never reachable"),jt){let a=["not","if","then","else"].includes(ue[ue.length-1]),l=["oneOf","anyOf","allOf"].includes(ue[ue.length-2]),h=["dependencies","dependentSchemas"].includes(ue[ue.length-2]),x=["propertyDependencies"].includes(ue[ue.length-3]);H(a||l||h||x,"Unexpected logical path")}else if(!ue.includes("not")&&((!(I!==Q&&w===I)||_e.has(Me))&&(_e.delete(Me),J.type||Ue("type"),tt("array")&&J.items!==1/0&&Ue(w.items?"additionalItems or unevaluatedItems":"items rule"),tt("object")&&!J.properties.includes(!0)&&Ue("additionalProperties or unevaluatedProperties"),!J.fullstring&&Et&&Ne("[requireStringValidation] pattern, format or contentSchema should be specified for strings, use pattern: ^[\\s\\S]*$ to opt-out")),typeof w.propertyNames!="object"))for(let l of["additionalProperties","unevaluatedProperties"])w[l]&&Ue(`wild-card ${l}`,"requires propertyNames");return w.properties&&!w.required&&Ue("if properties is used, required"),H(Fe.size===0||We,"Unprocessed keywords:",[...Fe]),{stat:J,local:ve}},"visit"),{stat:Wt,local:$t}=qt(e("validate.errors"),[],{name:s("data")},I,[]);if(_e.has(Me))throw new Error("Unexpected: unvalidated cyclic ref");if(q[Re]&&(z(Wt).items||z(Wt).properties)){if(!$t)throw new Error("Failed to trace dynamic properties");E.write("validate.evaluatedDynamic = [%s, %s, %s]",$t.item,$t.items,$t.props)}return be?E.write("return errorCount === 0"):E.write("return true"),E.write("}"),dt||(kt=E.makeFunction(X),delete X[Me],X[Me]=kt),X[Me][Pt]=Wt,Me},"compileSchema"),vt=t((I,Q)=>{if(!Array.isArray(I))throw new Error("Expected an array of schemas");try{let q=Object.create(null),{getref:X}=p(q);_e.clear(),ut.clear();let pe=I.map(Ae=>X(Ae)||sr(Ae,Ae,Q,q));if(_e.size!==0)throw new Error("Unexpected: not all refs are validated");return{scope:q,refs:pe}}catch(q){if(!Q[Re]&&q.message==="[opt] Dynamic unevaluated tracing not enabled")return vt(I,{...Q,[Re]:!0});if(!Q[Ze]&&q.message==="[opt] Dynamic anchors are not enabled")return vt(I,{...Q,[Ze]:!0});if(!Q[lt]&&q.message==="[opt] Recursive anchors are not enabled")return vt(I,{...Q,[lt]:!0});throw q}finally{_e.clear(),ut.clear()}},"compile");n.exports={compile:vt}}}),zo=Se({"node_modules/@exodus/schemasafe/src/index.js"(r,n){var e=sn(),{buildSchemas:s}=cn(),{compile:d}=Lo(),{deepEqual:i}=or(),f=t(v=>t(function o(p){if(!i(p,JSON.parse(JSON.stringify(p))))return o.errors=[{instanceLocation:"#",error:"not JSON compatible"}],!1;let u=v(p);return o.errors=v.errors,u},"validateIsJSON"),"jsonCheckWithErrors"),y=t(v=>o=>i(o,JSON.parse(JSON.stringify(o)))&&v(o),"jsonCheckWithoutErrors"),b=t((v,{parse:o=!1,multi:p=!1,jsonCheck:u=!1,isJSON:m=!1,schemas:g=[],...j}={})=>{if(u&&m)throw new Error("Can not specify both isJSON and jsonCheck options");if(o&&(u||m))throw new Error("jsonCheck and isJSON options are not applicable in parser mode");let O=o?"strong":"default",B=m||u||o,W=p?v:[v],Z={mode:O,...j,schemas:s(g,W),isJSON:B},{scope:$,refs:P}=d(W,Z);if(j.dryRun)return;if(j.lint)return $.lintErrors;let z=e();if(o?$.parseWrap=j.includeErrors?S:R:u&&($.deepEqual=i,$.jsonCheckWrap=j.includeErrors?f:y),p){z.write("[");for(let A of P.slice(0,-1))z.write("%s,",A);P.length>0&&z.write("%s",P[P.length-1]),z.write("]"),o?z.write(".map(parseWrap)"):u&&z.write(".map(jsonCheckWrap)")}else o?z.write("parseWrap(%s)",P[0]):u?z.write("jsonCheckWrap(%s)",P[0]):z.write("%s",P[0]);let de=z.makeFunction($);return de.toModule=({semi:A=!0}={})=>z.makeModule($)+(A?";":""),de.toJSON=()=>v,de},"validator"),S=t(v=>o=>{if(typeof o!="string")return{valid:!1,error:"Input is not a string"};try{let p=JSON.parse(o);if(!v(p)){let{keywordLocation:u,instanceLocation:m}=v.errors[0];return{valid:!1,error:`JSON validation failed for ${u.slice(u.lastIndexOf("/")+1)} at ${m}`,errors:v.errors}}return{valid:!0,value:p}}catch({message:p}){return{valid:!1,error:p}}},"parseWithErrors"),R=t(v=>o=>{if(typeof o!="string")return{valid:!1};try{let p=JSON.parse(o);return v(p)?{valid:!0,value:p}:{valid:!1}}catch{return{valid:!1}}},"parseWithoutErrors"),_=t(function(v,{parse:o=!0,...p}={}){if(!o)throw new Error("can not disable parse in parser");return b(v,{parse:o,...p})},"parser"),N=t(function(v,{lint:o=!0,...p}={}){if(!o)throw new Error("can not disable lint option in lint()");return b(v,{lint:o,...p})},"lint");n.exports={validator:b,parser:_,lint:N}}}),ln=zo()});var pn={};It(pn,{validateOptions:()=>_o});function _o(r,n){let e=Do(r),i=(e(n)?[]:e.errors||[]).map(To),f=Po(r),y=Uo(f,n),b=[...i,...y];return{valid:b.length===0,errors:b}}function Do(r){let n=dn.get(r);return n||(n=Ro(r,{includeErrors:!0,allErrors:!0,allowUnusedKeywords:!0}),dn.set(r,n)),n}function Po(r){let n=fn.get(r);return n||(n=Dt(r),fn.set(r,n)),n}function Dt(r,n=[]){if(!ze(r))return[];let e=[];if(r["x-allowZeroOrMin"]!==void 0&&e.push({path:n.join("."),min:r["x-allowZeroOrMin"]}),r.properties)for(let[s,d]of Object.entries(r.properties))e.push(...Dt(d,[...n,s]));return r.items&&(Array.isArray(r.items)?r.items.forEach((s,d)=>{e.push(...Dt(s,[...n,String(d)]))}):e.push(...Dt(r.items,[...n,"0"]))),e}function Uo(r,n){let e=[];for(let s of r){let d=Fo(n,s.path);d!=null&&typeof d=="number"&&d!==0&&d<s.min&&e.push({path:s.path,message:`Must be 0 or at least ${s.min}`})}return e}function Fo(r,n){return n?n.split(".").reduce((s,d)=>{if(s!=null)return Array.isArray(s)?s[Number(d)]:s[d]},r):r}function To(r){let n=r.instanceLocation||r.dataPath||"#";return{path:Bo(n),message:r.error||"Invalid value"}}function Bo(r){return!r||r==="#"||r===""?"":r.replace(/^#\//,"").split("/").map(n=>n.replace(/~1/g,"/").replace(/~0/g,"~")).join(".")}var dn,fn,Ro,mn=Le(()=>{un();gt();dn=new WeakMap,fn=new WeakMap,{validator:Ro}=ln;t(_o,"validateOptions");t(Do,"getValidator");t(Po,"getCustomRules");t(Dt,"collectCustomRules");t(Uo,"runCustomRules");t(Fo,"getValueByPath");t(To,"convertError");t(Bo,"pointerToPath")});Nt();Nt();var Fr=window.chrome||window.browser||{};Lt();var hn={opts:{},dom:{},browserApi:Fr,initialized:!1};window.ext=hn;document.addEventListener("DOMContentLoaded",()=>{qo().catch(r=>{ct(r,"Could not initialize options view.")})});async function qo(){let r=document.getElementById("options-app");if(!r)throw new Error("Options root element #options-app not found");let[{optionsSchema:n,uiSchema:e},s,{renderOptionsForm:d},i]=await Promise.all([Promise.resolve().then(()=>(Vr(),Jr)),Promise.resolve().then(()=>(tr(),Yr)),Promise.resolve().then(()=>(rn(),tn)),Promise.resolve().then(()=>(mn(),pn))]),f=await s.createFormState(M),y=new Map,b={},S=null,R={onFieldChange:o,onResetField:p,onAddItem:m,onRemoveItem:g,onToggleSection:v,onResetAll:u,onSubmit:j,onDownload:O,onFocus:N};_(),hn.initialized=!0;function _($){d({container:r,schema:n,uiSchema:e,state:f,errors:y,customizedCount:s.customizedCount(f),sectionState:b,isCustomized:t(P=>s.isCustomized(f,P),"isCustomized"),handlers:R}),$&&window.requestAnimationFrame(()=>N($))}t(_,"render");function N($){let P=r.querySelector(`[data-path="${$}"]`);if(!P)return;let z=P.querySelector("input, select, textarea, button");z&&z.focus()}t(N,"focusPath");function v($,P){b[$]=P,_()}t(v,"handleToggleSection");function o($,P){s.updateField(f,$,P),W($),_($.join("."))}t(o,"handleFieldChange");function p($){s.resetField(f,$),W($),_($.join("."))}t(p,"handleResetField");function u(){s.resetAll(f),y=new Map,_()}t(u,"handleResetAll");function m($,P){s.appendItem(f,$,P),W($),_($.join("."))}t(m,"handleAddItem");function g($,P){s.removeItem(f,$,P),W($),_($.join("."))}t(g,"handleRemoveItem");async function j(){let{validateOptions:$}=i,P=$(n,f.formData);if(y=Z(P),y.size>0){_();return}try{let z=s.getOverrides(f);await Wr(z),window.location.href="./index.html#search/"}catch(z){ct(z,"Could not save user options.")}}t(j,"handleSubmit");async function O(){try{let $=s.getOverrides(f),z=(await B()).dump($),de=new Blob([z],{type:"text/yaml"}),A=URL.createObjectURL(de),D=document.createElement("a");D.href=A,D.download="user-options-overrides.yml",document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(A)}catch($){ct($,"Could not export overrides as YAML.")}}t(O,"handleDownloadOverrides");function B(){return window.jsyaml?Promise.resolve(window.jsyaml):(S||(S=new Promise(($,P)=>{let z=document.createElement("script");z.src="./lib/js-yaml.min.js",z.defer=!0,z.onload=()=>$(window.jsyaml),z.onerror=()=>P(new Error("Failed to load js-yaml library")),document.head.appendChild(z)})),S)}t(B,"loadYaml");function W($){let P=$.join(".");for(let z of Array.from(y.keys()))(z===P||z.startsWith(`${P}.`))&&y.delete(z)}t(W,"clearValidationErrorsForPath");function Z($){if($.valid)return new Map;let P=new Map;for(let z of $.errors){let de=z.path||"";P.has(de)||P.set(de,[]),P.get(de).push(z.message)}return P}t(Z,"mapErrors")}t(qo,"initializeOptions");})();
//# sourceMappingURL=initFormOptions.bundle.min.js.map
